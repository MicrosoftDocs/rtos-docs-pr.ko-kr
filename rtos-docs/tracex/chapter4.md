---
title: 4장 - Azure RTOS TraceX 성능 분석
description: 이 장에서는 Azure RTOS TraceX 성능 분석 도구에 대해 설명합니다.
author: philmea
ms.service: rtos
ms.topic: article
ms.date: 5/19/2020
ms.author: philmea
ms.openlocfilehash: 6cf1b5bd5349efd97c3afc8a9e7f57f477f06f8f
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104812354"
---
# <a name="chapter-4---azure-rtos-tracex-performance-analysis"></a>4장 - Azure RTOS TraceX 성능 분석

이 장에서는 Azure RTOS TraceX 성능 분석 도구에 대해 설명합니다.

## <a name="performance-analysis"></a>성능 분석

TraceX는 추적 파일에 대한 기본 제공 성능 분석을 제공합니다. *실행 프로필*, *인기 있는 서비스*, *스레드 스택 사용* 및 FileX 및 NetX 통계 *,* 를 비롯한 다양한 *성능 통계* 와 같은 정보를 쉽게 사용할 수 있습니다. 이 정보는 ***보기*** 메뉴 항목을 통해 사용할 수 있습니다. 


## <a name="execution-profile"></a>실행 프로필

***실행 프로필 생성** _ 단추나 _*_보기 - 실행 프로필_*_ 을 선택하면 현재 로드된 추적 파일의 TraceX 실행 프로필이 표시됩니다. 샘플 ThreadX 데모 추적과 연결된 실행 프로필이 _*그림 19**에 나와 있습니다.

![샘플 ThreadX 데모 추적과 연결된 실행 프로필의 스크린샷](./media/user-guide/execution_profile.png)

**그림 19**

**그림 19** 에 나와 있는 예제에서는 처리 시간 중 거의 45%가 **_스레드 2_*에, 처리 시간 중 거의 51%가* _스레드 1_** 에 해당합니다. 추적의 대부분이 메시지를 보내고 받는 스레드를 표시하므로 이는 논리적입니다. 이 예제에서 나머지 실행 컨텍스트의 실행 시간은 적습니다.

## <a name="popular-services"></a>인기 있는 서비스

***보기 -> 인기 있는 서비스** _를 선택하면 현재 로드된 추적 파일에 인기 있는 서비스가 표시됩니다. 기본적으로 이 정보는 전체 시스템에 대해 표시됩니다. 그러나 특정 스레드에 대한 인기 있는 서비스도 사용할 수 있습니다. 샘플 ThreadX 데모 추적의 인기 있는 서비스는 _*그림 20**에 나와 있습니다.

![샘플 ThreadX 데모 추적의 인기 있는 서비스 스크린샷](./media/user-guide/popular_services.png)

**그림 20**

**그림 20** 에 나온 예제를 보면 **_tx_queue_send_ *_ 및 _* _tx_queue_receive_** 가 이 추적에서 가장 인기 있는 두 가지 서비스임을 알 수 있습니다. 이는 이 추적이 캡처된 표준 ThreadX 데모의 동작과 일치합니다.

이 창의 맨 위에 있는 드롭다운 선택 목록을 사용하여 이 분석에 대해 특정 스레드를 선택할 수 있습니다. **그림 21** 은 **_스레드 3_** 에 대한 분석을 보여 줍니다.

![TraceX 인기 있는 서비스에 대한 분석 스크린샷](./media/user-guide/popular_services_thread3.png)

**그림 21**

## <a name="thread-stack-usage-analysis-for-thread-3"></a>스레드 스택 사용량 ![스레드 3에 대한 분석입니다.](./media/user-guide/screen_shot_17.png)

***스레드 스택 사용량 생성** _ 단추 또는 _*_보기 -> 스레드 스택 사용량_*_ 을 선택하면 추적 파일의 각 스레드에 대한 스택 사용량이 표시됩니다. 이는 파일의 많은 추적 항목에서 현재 스레드 스택 포인터를 포함하는 ThreadX에 의해 수행됩니다. 스택 사용량이 100%면 스택이 오버플로되었으며 애플리케이션에서 수정해야 함을 나타냅니다. 이 추적 파일 내에 스레드 실행이 없으면 해당 스레드에 대한 스택 사용량이 0%로 표시됩니다. 샘플 ThreadX 데모 추적의 스레드 스택 사용량은 _*그림 22**에 나와 있습니다.

![TraceX 스레드 스택 사용량의 스크린샷](./media/user-guide/thread_stack_usage.png)

**그림 22**

**그림 22** 에 표시된 예제는 이 추적에 포함된 대부분의 스레드가 스택 사용량이 9%에서 12%임을 나타냅니다.

## <a name="performance-statistics"></a>성능 통계

***성능 통계 생성** _ 단추 또는 _ *_보기 -> 성능 통계_**를 선택하면 현재 로드된 추적 파일의 성능 통계가 표시됩니다. 기본적으로 이 정보는 전체 시스템에 대해 표시됩니다. 그러나 성능 통계를 각각의 특정 스레드에 대해 사용할 수도 있습니다.

샘플 ThreadX 데모 추적의 성능 통계가 **그림 23** 에 나와 있습니다.

![TraceX 성능 통계의 스크린샷](./media/user-guide/performance_statistics.png)

**그림 23**

**그림 23** 에 표시된 예제를 보면 이 추적 파일에 18개의 컨텍스트 전환, 5개의 스레드 선점(preemption), 16개의 스레드 일시 중단, 19개의 스레드 재개 및 3개의 인터럽트가 있음을 알 수 있습니다. 이 추적 파일에는 우선 순위 반전이 없었습니다. 우선 순위에는 *결정적* 및 *비결정적* 이라는 두 가지 범주가 있습니다. 결정적 우선 순위 반전은 우선 순위가 낮은 스레드가 소유하는 뮤텍스에서 스레드가 차단되는 우선 순위 반전입니다. 비결정적 우선 순위 반전은 결정적 우선 순위 반전 중에 다른 우선 순위가 낮은 스레드를 실행하는 것입니다. 나중에 애플리케이션에서 예기치 않은 타이밍 동작을 발생시킬 수 있으므로 신중하게 검토해야 합니다.

## <a name="filex-statistics"></a>FileX 통계

***보기 -> FileX 통계** _를 선택하면 현재 로드된 추적 파일의 FileX 성능 통계가 표시됩니다. 이 정보는 모두 열린 미디어 개체에서 전체 시스템에 대해 표시됩니다. 샘플 FileX 데모 추적의 성능 통계가 _*그림 24**에 나와 있습니다.

![FileX 통계의 스크린샷](./media/user-guide/filex_statistics.png)

**그림 24**

**그림 27** 에 표시된 예제를 보면 19건의 미디어 열기, 19건의 미디어 닫기, 19건의 미디어 플러시, 18건의 디렉터리 읽기, 19건의 디렉터리 쓰기 및 18건의 디렉터리 캐시 누락이 있었음을 알 수 있습니다. 통계 창에서 아래로 스크롤하면 추가 정보를 볼 수 있습니다.

## <a name="netx-statistics"></a>NetX 통계

***보기 -> NetX 통계** _를 선택하면 현재 로드된 추적 파일의 NetX 성능 통계가 표시됩니다. 이 정보는 전체 시스템에 대해 표시됩니다. 샘플 NetX 데모 추적의 성능 통계가 _*그림 25**에 나와 있습니다.

![NetX 통계의 스크린샷](./media/user-guide/netx_statistics.png)

**그림 25**

**그림 25** 에 표시된 예제를 보면 ARP, Ping 또는 UDP 이벤트는 없으나, 30개의 IP 패킷이 전송되고, 1,368개의 IP 바이트가 전송되었으며, 30개의 IP 패킷이 수신되고, 1,360개의 IP 바이트가 수신되었음을 알 수 있습니다.

## <a name="trace-file-information"></a>추적 파일 정보

***보기 -> 추적 파일 정보** _를 선택하면 열려 있는 추적 파일에 대한 몇 가지 기본 정보가 표시됩니다. 이 정보에는 파일의 바이트 순서, 시간 원본의 크기, 각 개체 이름에 대한 최대 바이트 수 및 모든 추적 파일 포인터의 기본 주소가 포함됩니다. _ *그림 26**은 표준 **_demo_threadx.trx_** 추적 파일에 대한 추적 파일 정보를 보여 줍니다.

![TraceX 파일 정보의 스크린샷](./media/user-guide/trace_file_info.png)

**그림 26**

## <a name="raw-trace-dump"></a>원시 추적 덤프

***보기 -> 원시 추적 덤프** _를 선택하면 원시 추적 덤프를 포함하는 파일의 이름을 지정하는 대화 상자가 표시됩니다. 파일 이름 및 경로를 입력한 후 TraceX는 원시 추적 파일을 텍스트 형식으로 빌드하고 _*_notepad.exe_*_ 를 시작하여 표시합니다. _ *그림 27**은 표준 **_demo_threadx.trx_** 추적 파일에 대한 원시 추적 파일 덤프를 보여 줍니다.

![원시 추적 덤프의 스크린샷](./media/user-guide/raw_trace_dump.png)

**그림 27**
