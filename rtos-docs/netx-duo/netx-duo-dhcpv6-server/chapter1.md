---
title: 챕터 1 - Azure RTOS NetX Duo DHCPv6 서버 소개
description: 이 문서에서는 NetX Duo DHCPv6 서버에서 IPv6 주소를 DHCPv6 클라이언트에 할당하는 방법에 대해 자세히 설명합니다.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104810860"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="ec595-103">챕터 1 - Azure RTOS NetX Duo DHCPv6 서버 소개</span><span class="sxs-lookup"><span data-stu-id="ec595-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="ec595-104">IPv6 네트워크에서 DHCPv6은 클라이언트에서 IPv6 주소를 가져오는 데 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="ec595-105">IPv4 주소를 제공하지 않는다는 점에서 IPv4로 제한된 DHCP를 대체하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="ec595-106">DHCPv6에는 DHCP와 비슷한 기능과 향상된 많은 기능이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="ec595-107">IPv6 상태 비저장 주소 자동 구성을 사용하지 않거나 사용할 수 없는 클라이언트는 DHCPv6을 사용하여 DHCPv6 서버에서 고유한 전역 IPv6 주소를 할당받을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="ec595-108">NetX Duo는 IPv6 네트워크 기반 애플리케이션 및 DHCPv6과 같은 네트워크 프로토콜을 지원하기 위해 개발되었습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="ec595-109">이 문서에서는 NetX Duo DHCPv6 서버에서 IPv6 주소를 DHCPv6 클라이언트에 할당하는 방법에 대해 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="ec595-110">DHCPv6 통신</span><span class="sxs-lookup"><span data-stu-id="ec595-110">DHCPv6 Communication</span></span>

<span data-ttu-id="ec595-111">**DHCPv6 메시지 구조**</span><span class="sxs-lookup"><span data-stu-id="ec595-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="ec595-112">메시지 콘텐츠에는 기본적으로 메시지 헤더 뒤에 하나 이상의(일반적으로 더 많은) 옵션 블록이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="ec595-113">각 블록이 1바이트를 나타내는 기본 구조는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-113">Below is the basic structure where each block represents one byte:</span></span>

![DHCPv6 메시지 및 옵션 블록 구조를 보여 주는 다이어그램](media/image2.jpg)

<span data-ttu-id="ec595-115">**그림 1. DHCPv6 메시지 및 옵션 블록 구조**</span><span class="sxs-lookup"><span data-stu-id="ec595-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="ec595-116">1바이트 메시지 유형 필드는 DHCPv6 메시지 유형을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="ec595-117">3바이트 트랜잭션 ID 필드는 클라이언트에서 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="ec595-118">이는 임의의 문자 시퀀스일 수 있지만 서버에 대한 각 클라이언트 메시지에 대해 고유해야 합니다(클라이언트에서 보낸 중복 메시지에서 보존됨).</span><span class="sxs-lookup"><span data-stu-id="ec595-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="ec595-119">서버는 클라이언트에 대한 각 응답에 대해 해당 트랜잭션 ID를 사용하여 패킷이 네트워크에서 지연되거나 삭제되는 경우 클라이언트에서 서버 메시지를 일치시킬 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="ec595-120">트랜잭션 ID 필드 다음에는 클라이언트에서 요청하는 항목을 표시하는 데 사용되는 하나 이상의 DHCPv6 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="ec595-121">DHCPv6 옵션 구조는 옵션 코드, 옵션 길이 필드(길이 또는 코드 필드를 포함하지 않음), 마지막으로 옵션 데이터 자체(클라이언트에서 요청하는 데이터에 대한 하나 이상의 2바이트 옵션 코드 필드)로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="ec595-122">일부 옵션 블록에는 중첩된 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-122">Some option blocks have nested options.</span></span> <span data-ttu-id="ec595-123">예를 들어 *IANA(비임시 주소에 대한 ID 연결)* 옵션에는 IPv6 주소를 요청하는 하나 이상의 *IA(ID 연결)* 옵션이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="ec595-124">서버 응답 메시지에 반환된 *IANA* 옵션에는 서버에서 부여한 IPv6 주소 및 임대 시간과 동일한 *IA* 옵션과 클라이언트 주소 요청에 오류가 있는지 여부를 나타내는 *상태* 옵션이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="ec595-125">모든 옵션 블록의 목록 및 해당 설명은 **부록 A** 에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="ec595-126">**DHCPv6 메시지 유형**</span><span class="sxs-lookup"><span data-stu-id="ec595-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="ec595-127">DHCPv6은 DHCP의 기능을 크게 향상시키지만 DHCP와 동일한 수의 메시지를 사용하며 DHCP와 동일한 공급업체 옵션을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="ec595-128">DHCPv6 메시지 목록은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="ec595-129">SOLICT (1)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="ec595-130">ADVERTISE (2)(서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="ec595-131">REQUEST (3)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="ec595-132">REPLY (7)(서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="ec595-133">CONFIRM (4)(클라이언트에서 보냄)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="ec595-134">RENEW (5)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="ec595-135">REBIND (6)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="ec595-136">RELEASE (8)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="ec595-137">DECLINE (9)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="ec595-138">INFORM_REQUEST (11)(클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="ec595-139">RECONFIGURE\* (10)(서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="ec595-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="ec595-140">\*RECONFIGURE는 NetX Duo DHCPv6 서버에서 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="ec595-141">괄호 안에 동등한 DHCPv4 메시지 유형이 있는 기본 DHCPv6 요청 시퀀스는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="ec595-142">클라이언트 ***간청** _ (_검색 *) 서버 **보급 알림** (* 제안 *) 클라이언트 **요청** (* 요청 *) 서버 **회신** (* DHCPAck*)</span><span class="sxs-lookup"><span data-stu-id="ec595-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="ec595-143">클라이언트 **갱신**(동일함) 서버 **회신** (*DHCPAck*)</span><span class="sxs-lookup"><span data-stu-id="ec595-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="ec595-144">DHCPv6 메시지 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="ec595-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="ec595-145">트랜잭션 ID: 클라이언트에서 서버에 보내는 각 메시지에 대해 트랜잭션 ID를 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="ec595-146">DHCPv6 서버는 이 트랜잭션 ID와 일치하지 않는 클라이언트의 메시지를 거부합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="ec595-147">서버는 클라이언트에 반환하는 응답에서 동일한 트랜잭션 ID를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="ec595-148">**DUID(DHCPv6 고유 식별자)**</span><span class="sxs-lookup"><span data-stu-id="ec595-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="ec595-149">모든 서버 메시지도 각 메시지에 DUID(DHCPv6 고유 식별자)를 포함해야 합니다. 그렇지 않으면 DHCPv6 클라이언트에서 메시지를 수락하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="ec595-150">LL(링크 계층) DUID는 클라이언트 MAC 주소, 하드웨어 유형 및 DUID 유형을 포함하는 제어 블록입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="ec595-151">LLT(링크 계층 시간) DUID는 호스트 네트워크에서 DUID가 고유하지 않을 가능을 줄이는 시간 필드를 추가로 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="ec595-152">이러한 이유로 RFC 3315는 LL DUID보다 LLT DUID를 권장합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="ec595-153">호스트 애플리케이션에서 고유한 시간 값을 만들지 않는 경우 NetX Duo DHCPv6에서 기본 시간 값을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="ec595-154">세 번째 유형의 DUID는 엔터프라이즈 ID(IANA에 등록된 경우와 동일) 및 프라이빗 데이터(예를 들어 메모리 크기, 기타 하드웨어 구성의 운영 체제 유형에 따라 형식과 길이가 달라짐)를 포함하는 엔터프라이즈(공급업체 할당) DUID입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="ec595-155">서버 공급업체 할당 및 프라이빗 ID 값을 설정하려면 이 문서의 다른 부분에 있는 구성 옵션 목록을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ec595-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="ec595-156">또한 클라이언트는 INFORM_REQUEST를 제외하고는 서버에 보내는 메시지에 DUID를 포함해야 합니다. 그렇지 않으면 서버에서 메시지를 거부합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="ec595-157">**DHCPv6 클라이언트 서버 세션**</span><span class="sxs-lookup"><span data-stu-id="ec595-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="ec595-158">DHCPv6 클라이언트와 서버는 UDP를 통해 메시지를 교환합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="ec595-159">클라이언트는 546 포트를 사용하여 DHCPv6 메시지를 보내고 받고, 서버는 547 포트를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="ec595-160">클라이언트는 처음에 링크-로컬 주소를 사용하여 DHCPv6 메시지를 보내고 받습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="ec595-161">*All_DHCP_Relay_Agents_and_Servers* 멀티캐스트 주소 *(FF02::01:02)* 로 알려진 예약된 링크 범위 멀티캐스트 주소를 사용하여 모든 메시지를 DHCPv6 서버에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="ec595-162">IPv6 주소 할당 요청의 경우 DHCPv6 서버는 *All_DHCP_Relay_Agents_and_Servers* 주소로 보내는  *간청* 메시지를 수신 대기합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="ec595-163">*간청* 요청에서 클라이언트는 특정 IPv6 주소를 할당하도록 요청하거나 서버에서 하나를 선택하도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="ec595-164">또한 서버에서 다른 네트워크 구성 정보를 요청할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="ec595-165">DHCPv6 서버에서 유효한 *간청* 메시지를 추출하고 IPv6 주소를 클라이언트에 할당할 수 있는 경우 클라이언트에 부여할 IPv6 주소, IPv6 주소 임대 시간 및 클라이언트에서 요청한 추가 정보가 포함된 *보급* 메시지를 사용하여 응답합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="ec595-166">클라이언트에서 서버 제안을 수락하는 경우 해당 클라이언트는 서버에서 IPv6 주소를 수락하는 것을 인식할 수 있도록 하는 *요청* 메시지를 사용하여 응답합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="ec595-167">서버는 클라이언트가 *회신* 메시지를 사용하여 IPv6 주소에 바인딩되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="ec595-168">클라이언트 DHCPv6 메시지가 잘못된 경우 서버에서 메시지를 자동으로 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="ec595-169">서버에서 요청을 허용할 수 없는 경우 IP 주소 IANA 옵션의 상태 필드에 문제를 표시하는 *회신* 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="ec595-170">중복 클라이언트 요청을 받으면 서버는 클라이언트에서 단순히 패킷을 받지 않았다고 가정하고 이전 DHCPv6 응답을 다시 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="ec595-171">클라이언트는 중복 주소 검색과 같은 다양한 IPv6 프로토콜을 사용하여 서버에서 할당된 IPv6 주소가 시스템의 다른 호스트에 할당되지 않았는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="ec595-172">주소가 고유하지 않은 경우 클라이언트에서 *거부* 메시지를 서버에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="ec595-173">서버는 IP 임대 테이블을 이 정보로 업데이트하여 주소가 이미 할당되었음을 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="ec595-174">한편 클라이언트는 다른 *간청* 메시지를 사용하여 DHCPv6 요청 프로세스를 다시 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="ec595-175">클라이언트는 IPv6 주소 외에도 DNS 서버 및 네트워크 도메인 이름과 같은 다른 네트워크 정보도 인식해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="ec595-176">DHCPv6은 *간청* 및 *요청* 메시지에서 옵션 요청을 사용하거나 별도로 *정보 요청* 메시지에서 옵션 요청을 사용하여 이 정보를 요청하는 방법을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="ec595-177">DHCPv6 옵션은 이 챕터의 뒷부분에서 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="ec595-178">**IPv6 임대 기간**</span><span class="sxs-lookup"><span data-stu-id="ec595-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="ec595-179">서버에서 IPv6 주소를 클라이언트에 부여하는 경우 클라이언트에서 *갱신* 및 *리바인딩* 메시지를 사용하여 해당 IPv6 주소를 갱신(T1) 또는 리바인딩(T2)하도록 권장하는 시점에 대한 임대 기간(수명)도 IANA 옵션에 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="ec595-180">둘 사이의 차이점은 클라이언트에서 서버 DUID를 *갱신* 요청에 포함하여 *갱신* 메시지를 서버에 보낸다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="ec595-181">그러나 서버를 지정하지 않으므로 서버 DUID가 *All_DHCP_Relay_Agents_and_Servers* 주소에 대한 *리바인딩* 메시지에 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="ec595-182">서버에서 클라이언트에 부여하는 실제 IPv6 주소를 포함하는 IA 옵션에는 임대된 IPv6 주소가 각각 더 이상 사용되지 않거나 더 이상 사용되지 않거나 쓸모없는(유효하지 않은) 경우에도 기본 설정 및 유효 수명이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="ec595-183">NetX Duo DHCPv6 서버는 클라이언트 메시지 간의 시간을 추적하기 위해 각 클라이언트의 세션 시간 제한을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="ec595-184">이는 클라이언트 호스트의 연결이 끊기거나 네트워크 작동이 중단되는 경우에 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="ec595-185">세션 시간 제한이 만료되면 클라이언트에서 더 이상 관심이 없거나 서버의 DHCPv6 요청을 수행할 수 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="ec595-186">서버는 클라이언트 레코드를 삭제하고 임시로 할당된 IPv6 주소를 사용 가능한 풀로 다시 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="ec595-187">세션 시간 제한 대기는 사용자가 구성할 수 있는 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="ec595-188">클라이언트에서 IPv6 주소를 해제하려고 하거나 DHCPv6 서버에서 할당한 IPv6 주소가 이미 사용되고 있음을 검색하는 경우 각각 *릴리스* 또는 *거부* 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="ec595-189">*릴리스* 메시지의 경우 서버는 해당 IPv6 주소 상태를 사용 가능한 풀로 다시 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="ec595-190">*거부* 메시지의 경우 해당 IP 임대 테이블을 업데이트하여 이 IPv6 주소를 사용할 수 없음을 나타냅니다(네트워크의 다른 엔터티에서 소유함).</span><span class="sxs-lookup"><span data-stu-id="ec595-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="ec595-191">**IPv6 임대 및 클라이언트 레코드 데이터**</span><span class="sxs-lookup"><span data-stu-id="ec595-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="ec595-192">DHCPv6 서버는 클라이언트 요청 수락을 시작하면 IPv6 주소를 요청하거나 할당된 활성 클라이언트 목록을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="ec595-193">서버는 클라이언트 임대 기간을 주기적으로 업데이트하는 임대 타이머를 통해 IP 임대 만료를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="ec595-194">기간이 유효 수명을 초과하면 서버에서 클라이언트 레코드를 지우고 IPv6 주소를 사용 가능한 풀로 다시 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="ec595-195">이 문제가 발생하기 전에 클라이언트에서 갱신/리바인딩 프로세스를 시작해야 합니다!</span><span class="sxs-lookup"><span data-stu-id="ec595-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="ec595-196">NetX Duo DHCPv6 서버 클라이언트 레코드 테이블에는 클라이언트를 식별하기 위한 정보 및 DHCPv6 클라이언트 요청의 유효성을 검사하고 IPv6 주소를 할당하거나 다시 할당하기 위한 '상태' 정보가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="ec595-197">이러한 정보에 포함되는 항목은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-197">Such information includes:</span></span>

- <span data-ttu-id="ec595-198">네트워크의 각 클라이언트 호스트를 고유하게 정의하는 클라이언트 DUID(DHCPv6 고유 식별자).</span><span class="sxs-lookup"><span data-stu-id="ec595-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="ec595-199">클라이언트는 모든 DHCPv6 메시지에 대해 항상 동일한 DUID를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="ec595-200">클라이언트 IPv6 주소 할당 매개 변수를 정의하는 누적된 클라이언트 IANA(비임시 주소에 대한 ID 연결) 및 IA(ID 연결) IPv6 주소</span><span class="sxs-lookup"><span data-stu-id="ec595-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="ec595-201">클라이언트 옵션 요청(DNS 서버, 도메인 이름 등)</span><span class="sxs-lookup"><span data-stu-id="ec595-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="ec595-202">최신 DHCPv6 요청의 클라이언트 IPv6 원본 주소(설정된 경우) 및 대상 주소(멀티캐스트가 아닌 경우)</span><span class="sxs-lookup"><span data-stu-id="ec595-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="ec595-203">클라이언트의 최신 메시지 유형 및 DHCPv6 '상태'</span><span class="sxs-lookup"><span data-stu-id="ec595-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="ec595-204">NetX Duo DHCPv6 서버 요구 사항 및 제약 조건</span><span class="sxs-lookup"><span data-stu-id="ec595-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="ec595-205">NetX Duo DHCPv6 서버 API를 사용하려면 ThreadX 5.1 이상 및 NetX Duo 5.5 이상이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="ec595-206">**요구 사항**</span><span class="sxs-lookup"><span data-stu-id="ec595-206">**Requirements**</span></span>

<span data-ttu-id="ec595-207">***IP 스레드 작업 설정***</span><span class="sxs-lookup"><span data-stu-id="ec595-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="ec595-208">NetX Duo DHCPv6 서버는 메시지를 네트워크 링크에서 DHCPv6으로 보내고 받기 위한 IP 인스턴스를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="ec595-209">이는 *nx_ip_create* 서비스를 사용하여 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="ec595-210">NetX Duo DHCPv6 서버 자체를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="ec595-211">이는 *nx_dhcpv6_server_create* 서비스를 사용하여 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="ec595-212">DHCPv6는 NetX Duo, ICMPv6 및 UDP를 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="ec595-213">따라서 DHCPv6 서버를 사용하려면 먼저 다음 NetX Duo 서비스를 호출하여 IPv6을 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="ec595-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="ec595-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="ec595-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="ec595-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="ec595-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="ec595-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="ec595-217">또한 DHCPv6 서버를 시작하기 전에 다음과 같은 몇 가지 설정 작업을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="ec595-218">해당 링크 로컬 및 IPv6 전역 주소를 만들고 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="ec595-219">주소 유효성 검사는 사용하도록 설정된 경우 NetX Duo에서 중복 주소 검색을 사용하여 자동으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="ec595-220">링크 로컬 및 전역 IP 주소 유효성 검사에 대한 자세한 내용은 *NetX Duo 사용자 설명서* 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ec595-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="ec595-221">DHCPv6 인터페이스에 대한 네트워크 인터페이스 인덱스를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="ec595-222">할당 가능한 IPv6 주소에 대한 IP 주소 범위를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="ec595-223">또는 이전 서버 DHCPv6 세션의 데이터가 있는 경우 해당 세션의 IPv6 임대 테이블 및 클라이언트 레코드를 비휘발성 메모리에서 DHCPv6 서버로 업로드해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="ec595-224">이 문서의 다른 부분에 있는 간단한 예제 시스템에서는 이 요구 사항을 충족하기 위한 DHCPv6 서버 서비스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="ec595-225">서버 DUID를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-225">Set the Server DUID.</span></span> <span data-ttu-id="ec595-226">서버가 이전 세션에서 DUID를 만든 경우 동일한 데이터를 사용하여 해당 클라이언트에 보내는 메시지에 대해 동일한 DUID를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="ec595-227">이 문서의 다른 부분에 있는 간단한 예제 시스템에서 이 요구 사항이 충족되는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="ec595-228">이 시점에서 DHCPv6 서버를 실행할 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="ec595-229">내부적으로 NetX Duo DHCPv6 서버는 547 포트에 바인딩된 UDP 소켓을 만들고 클라이언트 요청에 대한 수신 대기를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="ec595-230">***패킷 풀 요구 사항***</span><span class="sxs-lookup"><span data-stu-id="ec595-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="ec595-231">NetX Duo DHCPv6 서버에는 DHCPv6 메시지를 보내기 위한 패킷 풀이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="ec595-232">패킷 페이로드 및 사용 가능한 패킷 수와 관련된 패킷 풀의 크기는 사용자가 구성할 수 있으며, 호스트 애플리케이션에서 보내는 DHCPv6 메시지 및 기타 전송의 예상 양에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="ec595-233">일반적인 DHCPv6 메시지는 클라이언트에서 요청하는 추가 옵션 수와 서버에서 사용할 수 있는 정보에 따라 약 200-300바이트입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="ec595-234">***DHCPv6 서버 인터페이스 설정***</span><span class="sxs-lookup"><span data-stu-id="ec595-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="ec595-235">DHCPv6 서버는 기본적으로 클라이언트 요청을 수락하는 인터페이스인 기본 네트워크 인터페이스로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="ec595-236">그러나 호스트 애플리케이션에서 여전히 서버 전역 주소를 만드는 데 사용한 전역 주소 인덱스를 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="ec595-237">DHCPv6 인터페이스 인덱스 및 전역 주소 인덱스는 *nx_dhcpv6_server_interface_set* 서비스를 사용하여 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="ec595-238">이는 이 문서의 "간단한 예제"에서도 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="ec595-239">***서버 다시 부팅에서 DHCPv6 DUID 저장***</span><span class="sxs-lookup"><span data-stu-id="ec595-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="ec595-240">DHCPv6 프로토콜을 사용하려면 서버에서 여러 번 다시 부팅할 때 동일한 DUID를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="ec595-241">따라서 DUID를 만드는 데 사용되는 모든 데이터는 이 요구 사항을 위해 비휘발성 메모리에서 저장하고 검색해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="ec595-242">실시간 시계에 액세스해야 하는 링크 계층 및 시간 DUID를 사용하는 호스트의 경우</span><span class="sxs-lookup"><span data-stu-id="ec595-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="ec595-243">NetX Duo DHCPv6 호스트 애플리케이션은 초기 서버 DUID를 만들기에 대한 시간 값을 생성하기 위한 실시간 데이터 액세스를 포함하고 후속 서버 세션에서 다시 사용할 수 있도록 해당 데이터를 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="ec595-244">그런 다음, *nx_dhcpv6_set_server_duid* 에서 DUID 데이터를 인수로 사용하고 DUID 유형에 따라 구성 옵션을 사용하여 고유한 DUID를 생성(또는 재생성)합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="ec595-245">***할당 가능한 IPv6 주소 목록 만들기***</span><span class="sxs-lookup"><span data-stu-id="ec595-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="ec595-246">DHCPv6 서버를 만든 후 이전에 저장된 IP 주소 목록 데이터가 없는 경우 서버 호스트 애플리케이션에서 할당 가능한 IPv6 전역 주소 범위를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="ec595-247">이는 시작 주소 및 끝 IPv6 주소를 입력으로 사용하는 *nx_dhcpv6_create_ip_address_range* 서비스를 사용하여 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="ec595-248">***DHCPv6 할당 가능 주소 및 클라이언트 데이터 저장***</span><span class="sxs-lookup"><span data-stu-id="ec595-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="ec595-249">DHCPv6 프로토콜을 사용하려면 서버를 다시 부팅하는 경우 DHCPv6 서버에서 클라이언트 및 IPv6 주소 데이터를 비휘발성 스토리지에 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="ec595-250">NetX Duo DHCPv6 서버에는 클라이언트 및 IPv6 주소 데이터를 각각 DHCPv6 서버에서 업로드 및 다운로드하는 다음과 같은 몇 가지 API가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="ec595-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="ec595-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="ec595-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="ec595-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="ec595-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="ec595-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="ec595-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="ec595-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="ec595-255">서버를 다시 시작하기 전에 데이터를 서버에 업로드해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="ec595-256">데이터 다운로드는 DHCPv6 서버가 중지(또는 일시 중단)된 후에만 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="ec595-257">이를 수행하는 서비스는 이 문서의 뒷부분에서 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="ec595-258">그러나 NetX Duo DHCPv6에서 제공하는 비휘발성 스토리지에 대한 액세스는 정의하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="ec595-259">이는 호스트 애플리케이션에서 처리해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-259">This must be handled by the host application.</span></span> <span data-ttu-id="ec595-260">간단한 예제에서는 호스트 애플리케이션에서 이 작업을 수행하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="ec595-261">***서버 DUID(DHCP 고유 식별자)***</span><span class="sxs-lookup"><span data-stu-id="ec595-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="ec595-262">서버 DUID는 네트워크에서 DHCPv6 서버 호스트를 고유하게 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="ec595-263">서버에서 이전에 DUID를 만들지 않은 경우 *nx_dhcpv6_server_set_duid* 를 사용하여 하나를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="ec595-264">RFC 3315에 따라 서버가 다시 부팅된 후 검색할 수 있도록 DHCPv6 서버에서 이 DUID를 비휘발성 메모리에 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="ec595-265">DHCPv6 서버는 링크 계층, 링크 계층 시간 및 엔터프라이즈(공급업체 할당) DUID 유형을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="ec595-266">클라이언트는 공급업체 유형 DUID를 직접 보내야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="ec595-267">공급업체 유형 DUID(17)에 대한 옵션은 NetX Duo DHPv6 서버에서 직접 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="ec595-268">DHCPv6 서버 호스트 애플리케이션에는 임대 시간 제한을 포함하여 IPv6 주소 할당에 대한 기본값이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="ec595-269">이러한 옵션을 설정하는 방법은 이 문서 뒷부분에 있는 구성 가능한 옵션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ec595-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="ec595-270">:</span><span class="sxs-lookup"><span data-stu-id="ec595-270">:</span></span>

<span data-ttu-id="ec595-271">*IANA* 제어 블록에는 T1 및 T2 필드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="ec595-272">*IANA* 제어 블록의 *IA* 블록에는 기본 설정 및 유효 수명 필드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="ec595-273">호스트 애플리케이션에는 이러한 옵션을 설정하기 위해 이 문서의 다른 부분에서 정의된 구성 가능한 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="ec595-274">이러한 옵션은 모든 클라이언트 IPv6 주소 요청에 할당됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="ec595-275">이러한 DHCPv6 IP 임대 매개 변수는 아래에 정의되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="ec595-276">T1 – 클라이언트가 IPv6 주소를 할당한 서버에서 해당 IPv6 주소의 갱신을 시작해야 하는 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="ec595-277">T2 – 갱신이 실패하는 경우 클라이언트가 해당 링크에 있는 서버를 사용하여 IPv6 주소 리바인딩을 시작해야 하는 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="ec595-278">기본 설정 수명 – 클라이언트가 갱신하거나 리바인딩하지 않은 경우 클라이언트 주소가 더 이상 사용되지 않는 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="ec595-279">클라이언트는 이 주소를 계속 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-279">The Client can still use this address.</span></span>

<span data-ttu-id="ec595-280">유효 수명 – 클라이언트 IP 주소가 만료되고 네트워크 전송에서 이 주소를 사용하지 않아야 하는 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="ec595-281">RFC는 각각 클라이언트 *IANA* 옵션의 기본 설정 수명의 0.5 및 0.8인 T1 및 T2 시간을 권장합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="ec595-282">서버에 기본 설정이 없으면 서버는 이러한 시간을 0으로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="ec595-283">서버 회신에 T1 및 T2 시간이 0으로 설정되어 있으면 클라이언트에서 자체 T1 및 T2 시간을 설정하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="ec595-284">**제약 조건**</span><span class="sxs-lookup"><span data-stu-id="ec595-284">**Constraints**</span></span>

<span data-ttu-id="ec595-285">NetX Duo DHCPv6 서버에서 지원하지 않는 DHCPv6 옵션은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="ec595-286">DHCPv6 주소 요청 프로세스를 간청 및 회신 메시지 교환으로만 최적화하는 빠른 커밋 옵션</span><span class="sxs-lookup"><span data-stu-id="ec595-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="ec595-287">서버에서 클라이언트의 IP 주소 상태 변경을 시작할 수 있도록 하는 다시 구성 옵션</span><span class="sxs-lookup"><span data-stu-id="ec595-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="ec595-288">유니캐스트 옵션. 모든 클라이언트 메시지는 DHCPv6 서버가 아닌 *All_DHCP_Relay_Agents_and_Servers* 멀티캐스트 주소로 직접 보내야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="ec595-289">클라이언트에 부여된 임시 IP 주소인 IA_TA(임시 주소에 대한 ID) 옵션</span><span class="sxs-lookup"><span data-stu-id="ec595-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="ec595-290">클라이언트 요청당 여러 IA(IPv6 주소) 옵션</span><span class="sxs-lookup"><span data-stu-id="ec595-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="ec595-291">DHCPv6 클라이언트와 서버(예: 클라이언트 및 서버) 간의 릴레이 호스트는 동일한 네트워크에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="ec595-292">IPSec 및 인증은 DHCPv6 메시징에서 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="ec595-293">그러나 IP 인스턴스는 사용 중인 NetX Duo 버전에 따라 IPSec을 사용하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="ec595-294">NetX Duo DHCPv6 서버는 DNS 서버 옵션 요청만 직접 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="ec595-295">이는 후속 릴리스에서 변경될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-295">This may change in future releases.</span></span>

  - <span data-ttu-id="ec595-296">접두사 위임 옵션은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="ec595-297">DHCPv6 메시지 인증. 그러나 기본 NetX Duo 환경에서 IPSec을 사용하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="ec595-298">NetX Duo DHCPv6 서버도 클라이언트에 대한 릴레이 연결을 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="ec595-299">모든 클라이언트 요청은 서버 네트워크의 호스트에서 시작한다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="ec595-300">NetX Duo DHCPv6 서버 콜백 함수</span><span class="sxs-lookup"><span data-stu-id="ec595-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="ec595-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="ec595-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="ec595-302">DHCPv6 클라이언트에서 거부 메시지를 보내면 NetX Duo DHCPv6 서버는 해당 주소를 IPv6 주소 테이블에서 사용할 수 없는 것으로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="ec595-303">이 메시지의 서버 처리를 사용자 지정할 수 있도록 *nx_dhcpv6_IP_address_declined_handler* 가 제공됩니다 *.*</span><span class="sxs-lookup"><span data-stu-id="ec595-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="ec595-304">그러나 이 콜백은 현재 구현되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="ec595-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="ec595-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="ec595-306">옵션 요청 데이터가 DHCPv6 클라이언트 메시지에 포함된 경우 NetX Duo DHCPv6 서버는 정의된 경우 각 옵션 요청 옵션 코드를 이 사용자 콜백에 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="ec595-307">이렇게 하면 사용자 정의 콜백에서 데이터를 채울 수 있도록 하는 기능이 NetX Duo 서버에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="ec595-308">그러나 이 기능은 현재 구현되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="ec595-309">지원되는 DHCPv6 RFC</span><span class="sxs-lookup"><span data-stu-id="ec595-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="ec595-310">NetX Duo DHCPv6은 RFC3315, RFC3646 및 관련 RFC를 준수합니다.</span><span class="sxs-lookup"><span data-stu-id="ec595-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>