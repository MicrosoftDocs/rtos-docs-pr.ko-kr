---
title: 챕터 3 - USBX 호스트 스택의 기능 구성 요소
description: 이 챕터에서는 기능 관점에서 고성능 USBX 임베디드 USB 호스트 스택에 대해 설명합니다.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 17b8d884dd2c71d60e91f5fcec40c360060f4fe8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104813183"
---
# <a name="chapter-3---functional-components-of-usbx-host-stack"></a><span data-ttu-id="b84e1-103">챕터 3 - USBX 호스트 스택의 기능 구성 요소</span><span class="sxs-lookup"><span data-stu-id="b84e1-103">Chapter 3 - Functional Components of USBX Host Stack</span></span>

<span data-ttu-id="b84e1-104">이 챕터에서는 기능 관점에서 고성능 USBX 임베디드 USB 호스트 스택에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-104">This chapter contains a description of the high performance USBX embedded USB host stack from a functional perspective.</span></span>

## <a name="execution-overview"></a><span data-ttu-id="b84e1-105">실행 개요</span><span class="sxs-lookup"><span data-stu-id="b84e1-105">Execution Overview</span></span>

<span data-ttu-id="b84e1-106">USBX는 여러 구성 요소로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-106">USBX is composed of several components:</span></span>

- <span data-ttu-id="b84e1-107">초기화</span><span class="sxs-lookup"><span data-stu-id="b84e1-107">Initialization</span></span>
- <span data-ttu-id="b84e1-108">애플리케이션 인터페이스 호출</span><span class="sxs-lookup"><span data-stu-id="b84e1-108">Application interface calls</span></span>
- <span data-ttu-id="b84e1-109">루트 허브</span><span class="sxs-lookup"><span data-stu-id="b84e1-109">Root Hub</span></span>
- <span data-ttu-id="b84e1-110">허브 클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-110">Hub Class</span></span>
- <span data-ttu-id="b84e1-111">호스트 클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-111">Host Classes</span></span>
- <span data-ttu-id="b84e1-112">USB 호스트 스택</span><span class="sxs-lookup"><span data-stu-id="b84e1-112">USB Host Stack</span></span>
- <span data-ttu-id="b84e1-113">호스트 컨트롤러</span><span class="sxs-lookup"><span data-stu-id="b84e1-113">Host controller</span></span>

<span data-ttu-id="b84e1-114">다음 다이어그램에서는 USBX 호스트 스택을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-114">The following diagram illustrates the USBX host stack.</span></span>

![USBX 호스트 스택](./media/usbx-host-stack/usbx-host-stack.png)

### <a name="initialization"></a><span data-ttu-id="b84e1-116">초기화</span><span class="sxs-lookup"><span data-stu-id="b84e1-116">Initialization</span></span>

<span data-ttu-id="b84e1-117">USBX를 활성화하기 위해 ***ux_system_initialize*** 함수를 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-117">In order to activate USBX, the function ***ux_system_initialize*** must be called.</span></span> <span data-ttu-id="b84e1-118">이 함수는 USBX에 대한 메모리 리소스를 초기화합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-118">This function initializes the memory resources of USBX.</span></span>

<span data-ttu-id="b84e1-119">USBX 호스트 기능을 활성화기 위해 ***ux_host_stack_initialize*** 함수를 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-119">In order to activate USBX host facilities, the function ***ux_host_stack_initialize*** must be called.</span></span> <span data-ttu-id="b84e1-120">이 함수는 ThreadX 스레드, 뮤텍스 및 세마포와 같은 USBX 호스트 스택에서 사용하는 모든 리소스를 초기화합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-120">This function will in turn initialize all the resources used by the USBX host stack such as ThreadX threads, mutexes, and semaphores.</span></span>

<span data-ttu-id="b84e1-121">하나 이상의 USB 호스트 컨트롤러와 하나 이상의 USB 클래스를 활성화하려면 애플리케이션 초기화를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-121">It is up to the application initialization to activate at least one USB host controller and one or more USB classes.</span></span> <span data-ttu-id="b84e1-122">클래스를 스택에 등록하고 호스트 컨트롤러 초기화 함수를 호출했다면 버스가 활성 상태이고 디바이스 검색을 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-122">When the classes have been registered to the stack and the host controller(s) initialization function has been called the bus is active and device discovery can start.</span></span> <span data-ttu-id="b84e1-123">호스트 컨트롤러의 루트 허브가 연결된 디바이스를 발견하면 USB 토폴로지를 담당하는 USB 열거 스레드가 절전 모드에서 깨어나 디바이스를 열거합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-123">If the root hub of the host controller detects an attached device, the USB enumeration thread, in charge of the USB topology, will be wake up and proceed to enumerate the device(s).</span></span>

<span data-ttu-id="b84e1-124">루트 허브와 다운스트림 허브의 특성 때문에 호스트 컨트롤러 초기화 함수가 반환될 때 연결된 모든 USB 디바이스가 완전히 구성되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-124">It is possible, due to the nature of the root hub and downstream hubs, that all attached USB devices may not have been configured completely when the host controller initialization function returns.</span></span> <span data-ttu-id="b84e1-125">모든 USB 디바이스를 열거하는 데 몇 초 정도 걸릴 수 있습니다(특히 루트 허브와 USB 디바이스 사이에 하나 이상의 허브가 있는 경우).</span><span class="sxs-lookup"><span data-stu-id="b84e1-125">It can take several seconds to enumerate all USB devices, especially if there are one or more hubs between the root hub and USB devices.</span></span>

### <a name="application-interface-calls"></a><span data-ttu-id="b84e1-126">애플리케이션 인터페이스 호출</span><span class="sxs-lookup"><span data-stu-id="b84e1-126">Application Interface Calls</span></span>

<span data-ttu-id="b84e1-127">USBX에는 두 가지 수준의 API가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-127">There are two levels of APIs in USBX.</span></span>

- <span data-ttu-id="b84e1-128">USB 호스트 스택 API</span><span class="sxs-lookup"><span data-stu-id="b84e1-128">USB Host Stack APIs</span></span>
- <span data-ttu-id="b84e1-129">USB 호스트 클래스 API</span><span class="sxs-lookup"><span data-stu-id="b84e1-129">USB Host Class APIs</span></span>

<span data-ttu-id="b84e1-130">일반적으로 USBX 애플리케이션은 USB 호스트 스택 API 함수를 호출하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-130">Normally, a USBX application should not have to call any of the USB host stack API functions.</span></span> <span data-ttu-id="b84e1-131">대부분의 애플리케이션은 USB 클래스 API 함수에만 액세스합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-131">Most applications will only access the USB Class API functions.</span></span>

### <a name="usb-host-stack-apis"></a><span data-ttu-id="b84e1-132">USB 호스트 스택 API</span><span class="sxs-lookup"><span data-stu-id="b84e1-132">USB Host Stack APIs</span></span>

<span data-ttu-id="b84e1-133">호스트 스택 API 함수는 USBX 구성 요소(호스트 클래스 및 호스트 컨트롤러)의 등록, 디바이스 구성 및 사용 가능한 디바이스 엔드포인트에 대한 전송 요청을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-133">The host stack API functions are responsible for the registration of USBX components (host classes and host controllers), configuration of devices, and the transfer requests for available device endpoints.</span></span>

### <a name="usb-host-class-api"></a><span data-ttu-id="b84e1-134">USB 호스트 클래스 API</span><span class="sxs-lookup"><span data-stu-id="b84e1-134">USB Host Class API</span></span>

<span data-ttu-id="b84e1-135">클래스 API는 각 USB 클래스로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-135">The Class APIs are very specific to each USB class.</span></span> <span data-ttu-id="b84e1-136">USB 클래스에 사용되는 대부분의 일반 API는 디바이스 열기/닫기, 디바이스에서 읽기 및 쓰기와 같은 서비스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-136">Most of the common API functions for USB classes provide services such as opening/closing a device and reading from and writing to a device.</span></span>

### <a name="root-hub"></a><span data-ttu-id="b84e1-137">루트 허브</span><span class="sxs-lookup"><span data-stu-id="b84e1-137">Root Hub</span></span>

<span data-ttu-id="b84e1-138">각 호스트 컨트롤러 인스턴스에는 USB 루트 허브가 하나 이상 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-138">Each host controller instance has one or more USB root hubs.</span></span> <span data-ttu-id="b84e1-139">루트 허브의 수는 컨트롤러의 특성에 따라 결정됩니다. 또는 컨트롤러에서 특정 레지스터를 읽어서 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-139">The number of root hubs is either determined by the nature of the controller or can be retrieved by reading specific registers from the controller.</span></span>

### <a name="hub-class"></a><span data-ttu-id="b84e1-140">허브 클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-140">Hub Class</span></span>

<span data-ttu-id="b84e1-141">허브 클래스는 USB 허브 구동을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-141">The hub class is in charge of driving USB hubs.</span></span> <span data-ttu-id="b84e1-142">USB 허브는 독립 실행형 허브이거나 키보드 또는 모니터와 같은 복합 디바이스의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-142">A USB hub can either be a stand-alone hub or as part of a compound device such as a keyboard or a monitor.</span></span> <span data-ttu-id="b84e1-143">허브는 자체 전력을 사용할 수도 있고 버스의 전력을 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-143">A hub can be self-powered or bus-powered.</span></span> <span data-ttu-id="b84e1-144">버스의 전력을 사용하는 허브는 최대 4개의 다운스트림 포트를 가질 수 있으며 100mA 미만의 전력을 사용하는 자체 전력 또는 버스 전력 사용 디바이스만 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-144">Bus-powered hubs have a maximum of four downstream ports and can only allow for the connection of devices that are either self-powered or bus-powered devices that use less than 100mA of power.</span></span> <span data-ttu-id="b84e1-145">허브를 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-145">Hubs can be cascaded.</span></span> <span data-ttu-id="b84e1-146">최대 5개의 허브를 서로 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-146">Up to five hubs can be connected to one another.</span></span>

### <a name="usb-host-stack"></a><span data-ttu-id="b84e1-147">USB 호스트 스택</span><span class="sxs-lookup"><span data-stu-id="b84e1-147">USB Host Stack</span></span>

<span data-ttu-id="b84e1-148">USB 호스트 스택은 USBX의 핵심입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-148">The USB host stack is the centerpiece of USBX.</span></span> <span data-ttu-id="b84e1-149">세 가지 주요 함수를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-149">It has three main functions.</span></span>

- <span data-ttu-id="b84e1-150">USB 토폴로지를 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-150">Manage the topology of the USB.</span></span>
- <span data-ttu-id="b84e1-151">USB 디바이스를 하나 이상의 클래스에 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-151">Bind a USB device to one or more classes.</span></span>
- <span data-ttu-id="b84e1-152">클래스에 API를 제공하여 디바이스 설명자 조사 및 USB 전송을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-152">Provide an API to classes to perform device descriptor interrogation and USB transfers.</span></span>

### <a name="topology-manager"></a><span data-ttu-id="b84e1-153">토폴로지 관리자</span><span class="sxs-lookup"><span data-stu-id="b84e1-153">Topology Manager</span></span>

<span data-ttu-id="b84e1-154">USB 스택 토폴로지 스레드는 새 디바이스가 연결되거나 디바이스의 연결이 끊어질 때 활성화됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-154">The USB stack topology thread is awakened when a new device is connected or when a device has been disconnected.</span></span> <span data-ttu-id="b84e1-155">루트 허브 또는 일반 허브는 디바이스 연결을 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-155">Either the root hub or a regular hub can accept device connections.</span></span> <span data-ttu-id="b84e1-156">디바이스가 USB에 연결되면 토폴로지 관리자가 디바이스 설명자를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-156">Once a device has been connected to the USB, the topology manager will retrieve the device descriptor.</span></span> <span data-ttu-id="b84e1-157">이 설명자에는 이 디바이스에 사용 가능한 구성의 수가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-157">This descriptor will contain the number of possible configurations available for this device.</span></span> <span data-ttu-id="b84e1-158">대부분의 디바이스는 한 가지 구성만 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-158">Most devices have one configuration only.</span></span> <span data-ttu-id="b84e1-159">일부 디바이스는 연결된 포트에서 사용 가능한 전원에 따라 다르게 작동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-159">Some devices can operate differently according to the available power available on the port where it is connected.</span></span> <span data-ttu-id="b84e1-160">이 경우 사용 가능한 전원에 따라 디바이스에서 여러 구성 중에 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-160">If this is the case, the device will have multiple configurations that can be selected depending on the available power.</span></span> <span data-ttu-id="b84e1-161">토폴로지 관리자가 디바이스를 구성한 후에는 구성 설명자에 지정된 양의 전력을 디바이스로 끌어올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-161">When the device is configured by the topology manager, it is then allowed to draw the amount of power specified in its configuration descriptor.</span></span>

## <a name="usb-class-binding"></a><span data-ttu-id="b84e1-162">USB 클래스 바인딩</span><span class="sxs-lookup"><span data-stu-id="b84e1-162">USB Class Binding</span></span>

<span data-ttu-id="b84e1-163">디바이스가 구성되면 토폴로지 관리자는 디바이스 인터페이스 설명자를 살펴보고 클래스 관리자가 디바이스를 계속 검색하도록 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-163">When the device is configured, the topology manager will let the class manager continue the device discovery by looking at the device interface descriptors.</span></span> <span data-ttu-id="b84e1-164">한 디바이스에 하나 이상의 인터페이스 설명자가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-164">A device can have one or more interface descriptors.</span></span>

<span data-ttu-id="b84e1-165">인터페이스는 디바이스의 기능을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-165">An interface represents a function in a device.</span></span> <span data-ttu-id="b84e1-166">예를 들어 USB 스피커에는 세 개의 인터페이스가 있습니다. 하나는 오디오 스트리밍, 하나는 오디오 컨트롤, 나머지 하나는 다양한 스피커 단추를 관리하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-166">For instance, a USB speaker has three interfaces, one for audio streaming, one for audio control, and one to manage the various speaker buttons.</span></span>

<span data-ttu-id="b84e1-167">클래스 관리자는 디바이스 인터페이스를 하나 이상의 클래스에 조인하는 두 가지 메커니즘을 갖고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-167">The class manager has two mechanisms to join the device interface(s) to one or more classes.</span></span> <span data-ttu-id="b84e1-168">인터페이스 설명자에 표시된 PID/VID(제품 ID 및 공급업체 ID) 조합 또는 클래스/하위 클래스/프로토콜 조합을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-168">It can either use the combination of a PID/VID (product ID and vendor ID) found in the interface descriptor or the combination of Class/Subclass/Protocol.</span></span>

<span data-ttu-id="b84e1-169">PID/VID 조합은 일반 클래스로 구동할 수 없는 인터페이스에 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-169">The PID/VID combination is valid for interfaces that cannot be driven by a generic class.</span></span> <span data-ttu-id="b84e1-170">클래스/하위 클래스/프로토콜 조합은 프린터, 허브, 스토리지, 오디오 또는 HID와 같은 USB-IF 인증 클래스에 속하는 인터페이스에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-170">The Class/Subclass/Protocol combination is used by interfaces that belong to a USB-IF certified class such as a printer, hub, storage, audio, or HID.</span></span>

<span data-ttu-id="b84e1-171">클래스 관리자는 USBX 초기화에서 등록된 클래스 목록을 포함하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-171">The class manager contains a list of registered classes from the initialization of USBX.</span></span> <span data-ttu-id="b84e1-172">클래스 관리자는 한 클래스에서 해당 디바이스의 인터페이스 관리를 수락할 때까지 각 클래스를 한 번에 하나씩 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-172">The class manager will call each class one at a time until one class accepts to manage the interface for that device.</span></span> <span data-ttu-id="b84e1-173">클래스는 하나의 인터페이스만 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-173">A class can only manage one interface.</span></span> <span data-ttu-id="b84e1-174">USB 오디오 스피커에 대한 예제에서는 클래스 관리자가 인터페이스마다 모든 클래스를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-174">For the example of the USB audio speaker, the class manager will call all the classes for each of the interfaces.</span></span>

<span data-ttu-id="b84e1-175">한 클래스에서 인터페이스를 수락하면 해당 클래스의 새 인스턴스가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-175">Once a class accepts an interface, a new instance of that class is created.</span></span> <span data-ttu-id="b84e1-176">그러면 클래스 관리자는 인터페이스의 기본 대체 설정을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-176">The class manager will then search for the default alternate setting for the interface.</span></span> <span data-ttu-id="b84e1-177">디바이스는 각 인터페이스에 대한 하나 이상의 대체 설정을 가질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-177">A device may have one or more alternate settings for each interface.</span></span> <span data-ttu-id="b84e1-178">클래스에서 변경을 결정할 때까지 기본적으로 대체 설정 0이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-178">The alternate setting 0 will be the on used by default until a class decides to change it.</span></span>

<span data-ttu-id="b84e1-179">기본 대체 설정의 경우 클래스 관리자는 대체 설정에 포함된 모든 엔드포인트를 탑재합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-179">For the default alternate setting, the class manager will mount all the endpoints contained in the alternate setting.</span></span> <span data-ttu-id="b84e1-180">각 엔드포인트의 탑재가 성공하면 클래스 관리자는 인터페이스 초기화를 완료할 클래스로 돌아가서 작업을 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-180">If the mounting of each endpoint is successful, the class manager will complete its job by returning to the class that will finish the initialization of the interface.</span></span>

### <a name="usbx-apis"></a><span data-ttu-id="b84e1-181">USBX API</span><span class="sxs-lookup"><span data-stu-id="b84e1-181">USBX APIs</span></span>

<span data-ttu-id="b84e1-182">USB 스택은 특정 엔드포인트에서 디바이스 및 USB 전송에 대한 조사를 수행하기 위해 USB 클래스에 대한 특정 개수의 API를 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-182">The USB stack exports a certain number of APIs for the USB classes to perform interrogation on the device and USB transfers on specific endpoints.</span></span> <span data-ttu-id="b84e1-183">이러한 API 함수는 이 참조 설명서에 자세히 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-183">These API functions are described in detail in this reference manual.</span></span>

### <a name="host-controller"></a><span data-ttu-id="b84e1-184">호스트 컨트롤러</span><span class="sxs-lookup"><span data-stu-id="b84e1-184">Host Controller</span></span>

<span data-ttu-id="b84e1-185">호스트 컨트롤러 드라이버는 특정 유형의 USB 컨트롤러를 구동하는 일을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-185">The host controller driver is responsible for driving a specific type of USB controller.</span></span> <span data-ttu-id="b84e1-186">USB 호스트 컨트롤러 안에 여러 개의 컨트롤러가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-186">A USB host controller can have multiple controllers inside.</span></span> <span data-ttu-id="b84e1-187">예를 들어 특정 Intel PC 칩셋에는 두 개의 UHCI 컨트롤러가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-187">For instance, certain Intel PC chipset contain two UHCI controllers.</span></span> <span data-ttu-id="b84e1-188">일부 USB 2.0 컨트롤러에는 EHCI 컨트롤러의 인스턴스 하나 외에도 OHCI 컨트롤러의 여러 인스턴스가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-188">Some USB 2.0 controllers contain multiple instances of an OHCI controller in addition to one instance of the EHCI controller.</span></span>

<span data-ttu-id="b84e1-189">호스트 컨트롤러는 동일한 컨트롤러의 여러 인스턴스만 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-189">The Host controller will manage multiple instance of the same controller only.</span></span> <span data-ttu-id="b84e1-190">대부분의 USB 2.0 호스트 컨트롤러를 구동하려면 USBX를 초기화하는 동안 OCHI 컨트롤러와 EHCI 컨트롤러를 모두 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-190">In order to drive most USB 2.0 host controllers, it will be required to initialize both the OCHI controller and the EHCI controller during the initialization of USBX.</span></span>

<span data-ttu-id="b84e1-191">호스트 컨트롤러는 다음과 같은 관리를 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-191">The host controller is responsible for managing the following.</span></span>

- <span data-ttu-id="b84e1-192">루트 허브</span><span class="sxs-lookup"><span data-stu-id="b84e1-192">Root Hub</span></span>
- <span data-ttu-id="b84e1-193">전원 관리</span><span class="sxs-lookup"><span data-stu-id="b84e1-193">Power Management</span></span>
- <span data-ttu-id="b84e1-194">엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-194">Endpoints</span></span>
- <span data-ttu-id="b84e1-195">전송</span><span class="sxs-lookup"><span data-stu-id="b84e1-195">Transfers</span></span>

### <a name="root-hub"></a><span data-ttu-id="b84e1-196">루트 허브</span><span class="sxs-lookup"><span data-stu-id="b84e1-196">Root Hub</span></span>

<span data-ttu-id="b84e1-197">루트 허브 관리는 각 컨트롤러 포트에 전원을 공급하고 디바이스가 삽입되었는지 여부를 확인하는 일을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-197">The root hub management is responsible for the powering up of each controller port and determining if there is a device inserted or not.</span></span> <span data-ttu-id="b84e1-198">이 기능은 USBX 일반 루트 허브에서 컨트롤러 다운스트림 포트를 조사하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-198">This functionality is used by the USBX generic root hub to interrogate the controller downstream ports.</span></span>

### <a name="power-management"></a><span data-ttu-id="b84e1-199">전원 관리</span><span class="sxs-lookup"><span data-stu-id="b84e1-199">Power Management</span></span>

<span data-ttu-id="b84e1-200">전원 관리 처리는 갱 모드에서 일시 중단/다시 시작 신호를 처리하기 위해 제공되므로, 동시에 모든 컨트롤러 다운스트림 포트에 영향을 줍니다. 또는 컨트롤러에서 이 기능을 제공하는 경우에는 개별적으로 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-200">The power management processing provides for the handling of suspend/resume signals either in gang mode, therefore affecting all controller downstream ports at the same time, or individually if the controller offers this functionality.</span></span>

### <a name="endpoints"></a><span data-ttu-id="b84e1-201">엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-201">Endpoints</span></span>

<span data-ttu-id="b84e1-202">엔드포인트 관리는 컨트롤러에 대한 실제 엔드포인트를 만들거나 제거하는 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-202">The endpoint management provides for the creation or destruction of physical endpoints to the controller.</span></span> <span data-ttu-id="b84e1-203">실제 엔드포인트는 컨트롤러에서 구문 분석하는 메모리 엔터티(컨트롤러에서 마스터 DMA를 지원하는 경우) 또는 컨트롤러에서 작성되는 메모리 엔터티입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-203">The physical endpoints are memory entities that are parsed by the controller if the controller supports master DMA or that are written in the controller.</span></span> <span data-ttu-id="b84e1-204">물리적 엔드포인트는 컨트롤러에서 수행할 트랜잭션 정보를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-204">The physical endpoints contain transactions information to be performed by the controller.</span></span>

### <a name="transfers"></a><span data-ttu-id="b84e1-205">전송</span><span class="sxs-lookup"><span data-stu-id="b84e1-205">Transfers</span></span>

<span data-ttu-id="b84e1-206">전송 관리는 생성된 각 엔드포인트에서 트랜잭션을 수행하는 클래스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-206">Transfer management provides for a class to perform a transaction on each of the endpoints that have been created.</span></span> <span data-ttu-id="b84e1-207">각 논리 엔드포인트에는 USB 전송 요청에 사용되는 TRANSFER REQUEST라는 구성 요소가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-207">Each logical endpoint contains a component called TRANSFER REQUEST for USB transfer requests.</span></span> <span data-ttu-id="b84e1-208">TRANSFER REQUEST는 트랜잭션을 설명하기 위해 스택에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-208">The TRANSFER REQUEST is used by the stack to describe the transaction.</span></span> <span data-ttu-id="b84e1-209">그러면 이 TRANSFER REQUEST는 스택과 컨트롤러에 전달되고, 컨트롤러의 기능에 따라 여러 하위 트랜잭션으로 분할될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-209">This TRANSFER REQUEST is then passed to the stack and to the controller, which may divide it into several sub transactions depending on the capabilities of the controller.</span></span>

## <a name="usb-device-framework"></a><span data-ttu-id="b84e1-210">USB 디바이스 프레임워크</span><span class="sxs-lookup"><span data-stu-id="b84e1-210">USB Device Framework</span></span>

<span data-ttu-id="b84e1-211">USB 디바이스는 설명자 트리로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-211">A USB device is represented by a tree of descriptors.</span></span> <span data-ttu-id="b84e1-212">6가지 기본 설명자 형식이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-212">There are six main types of descriptors.</span></span>

- <span data-ttu-id="b84e1-213">디바이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-213">Device descriptors</span></span>
- <span data-ttu-id="b84e1-214">구성 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-214">Configuration descriptors</span></span>
- <span data-ttu-id="b84e1-215">인터페이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-215">Interface descriptors</span></span>
- <span data-ttu-id="b84e1-216">엔드포인트 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-216">Endpoint descriptors</span></span>
- <span data-ttu-id="b84e1-217">문자열 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-217">String descriptors</span></span>
- <span data-ttu-id="b84e1-218">함수 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-218">Functional descriptors</span></span>

<span data-ttu-id="b84e1-219">USB 디바이스는 매우 간단한 설명을 포함할 수 있으며 다음과 같은 모습입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-219">A USB device may have a very simple description and looks like this.</span></span>
<span data-ttu-id="b84e1-220">![간단한 USB 디바이스](./media/usbx-host-stack/usb-device-simple.png)</span><span class="sxs-lookup"><span data-stu-id="b84e1-220">![Simple USB device](./media/usbx-host-stack/usb-device-simple.png)</span></span>

<span data-ttu-id="b84e1-221">위의 그림에서 디바이스 구성은 하나뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-221">In the above illustration, the device has only one configuration.</span></span> <span data-ttu-id="b84e1-222">단일 인터페이스가 이 구성에 연결되고, 디바이스에 함수와 엔드포인트가 각각 하나씩만 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-222">A single interface is attached to this configuration, indicating that the device has only one function, and it has one endpoint only.</span></span> <span data-ttu-id="b84e1-223">디바이스 설명자에 연결된 문자열 설명자는 디바이스를 시각적으로 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-223">Attached to the device descriptor is a string descriptor providing a visible identification of the device.</span></span>

<span data-ttu-id="b84e1-224">그러나 디바이스가 더 복잡할 수 있으며 다음과 같은 모습일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-224">However, a device may be more complex and may appear as follows.</span></span>

![복잡한 USB 디바이스](./media/usbx-host-stack/usb-device-complex.png)

<span data-ttu-id="b84e1-226">위의 그림에서는 디바이스의 구성 설명자 2개가 디바이스 설명자에 연결되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-226">In the above illustration, the device has two configuration descriptors attached to the device descriptor.</span></span> <span data-ttu-id="b84e1-227">이 디바이스는 두 가지 전원 모드가 있거나 표준 클래스 또는 독점 클래스를 통해 구동 가능하다는 의미일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-227">This device may indicate that it has two power modes or can be driven by either standard classes or proprietary classes.</span></span>

<span data-ttu-id="b84e1-228">첫 번째 구성에 연결된 두 개의 인터페이스는 디바이스에 두 가지 논리 함수가 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-228">Attached to the first configuration are two interfaces indicating that the device has two logical functions.</span></span> <span data-ttu-id="b84e1-229">첫 번째 함수에는 엔드포인트 설명자 3개와 함수 설명자 하나가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-229">The first function has 3 endpoint descriptors and a functional descriptor.</span></span> <span data-ttu-id="b84e1-230">인터페이스를 구동하는 클래스에서 함수 설명자를 사용하여 제네릭 설명자에서 일반적으로 찾을 수 없는 이 인터페이스에 대한 추가 정보를 얻을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-230">The functional descriptor may be used by the class responsible to drive the interface to obtain further information about this interface normally not found by a generic descriptor.</span></span>

### <a name="device-descriptors"></a><span data-ttu-id="b84e1-231">디바이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-231">Device Descriptors</span></span>

<span data-ttu-id="b84e1-232">각 USB 디바이스에는 디바이스 설명자가 하나씩 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-232">Each USB device has one single device descriptor.</span></span> <span data-ttu-id="b84e1-233">이 설명자에는 디바이스 ID, 지원되는 구성 수, 디바이스를 구성하는 데 사용되는 기본 제어 엔드포인트의 특성이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-233">This descriptor contains the device identification, the number of configurations supported, and the characteristics of the default control endpoint used for configuring the device.</span></span>

| <span data-ttu-id="b84e1-234">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-234">Offset</span></span> | <span data-ttu-id="b84e1-235">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-235">Field</span></span>              | <span data-ttu-id="b84e1-236">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-236">Size</span></span> | <span data-ttu-id="b84e1-237">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-237">Value</span></span>    | <span data-ttu-id="b84e1-238">Description</span><span class="sxs-lookup"><span data-stu-id="b84e1-238">Description</span></span>                             |
| ------ | ------------------ | ---- | -------- | --------------------------------------- |
| <span data-ttu-id="b84e1-239">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-239">0</span></span>      | <span data-ttu-id="b84e1-240">BLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-240">BLength</span></span>            | <span data-ttu-id="b84e1-241">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-241">1</span></span>    | <span data-ttu-id="b84e1-242">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-242">Number</span></span>   | <span data-ttu-id="b84e1-243">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-243">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="b84e1-244">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-244">1</span></span>      | <span data-ttu-id="b84e1-245">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-245">bDescriptorType</span></span>    | <span data-ttu-id="b84e1-246">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-246">1</span></span>    | <span data-ttu-id="b84e1-247">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-247">Constant</span></span> | <span data-ttu-id="b84e1-248">디바이스 설명자 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-248">DEVICE Descriptor Type</span></span> |
| <span data-ttu-id="b84e1-249">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-249">2</span></span>      | <span data-ttu-id="b84e1-250">bcdUSB</span><span class="sxs-lookup"><span data-stu-id="b84e1-250">bcdUSB</span></span>             | <span data-ttu-id="b84e1-251">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-251">2</span></span>    | <span data-ttu-id="b84e1-252">BCD</span><span class="sxs-lookup"><span data-stu-id="b84e1-252">BCD</span></span>      | <span data-ttu-id="b84e1-253">BinaryCoded 설명자의 USB 사양 릴리스 번호</span><span class="sxs-lookup"><span data-stu-id="b84e1-253">USB Specification Release Number in BinaryCoded Dec</span></span><br /><span data-ttu-id="b84e1-254">예: 2.10은 0x210과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-254">Example: 2.10 is equivalent to 0x210.</span></span> <span data-ttu-id="b84e1-255">이 필드는 디바이스와 디바이스의 설명자가 호환되는 USB 사양의 릴리스를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-255">This field identifies the release of the USB Specification that the device and its descriptors are compliant with.</span></span> |
| <span data-ttu-id="b84e1-256">4</span><span class="sxs-lookup"><span data-stu-id="b84e1-256">4</span></span>      | <span data-ttu-id="b84e1-257">bDeviceClass</span><span class="sxs-lookup"><span data-stu-id="b84e1-257">bDeviceClass</span></span>       | <span data-ttu-id="b84e1-258">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-258">1</span></span>    | <span data-ttu-id="b84e1-259">클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-259">Class</span></span>    | <span data-ttu-id="b84e1-260">클래스 코드(USB-IF에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-260">Class code (assigned by USB-IF).</span></span><br /><span data-ttu-id="b84e1-261">이 필드를 0으로 초기화하면 구성 내의 각 인터페이스는 자체 클래스 정보를 지정하고 다양한 인터페이스가 독립적으로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-261">If this field is reset to 0, each interface within a configuration specifies its own class information and the various interfaces operate independently.</span></span><br /><span data-ttu-id="b84e1-262">이 필드를 1 ~ 0xFE 사이의 값으로 설정하면 디바이스는 다른 인터페이스에서 다른 클래스 사양을 지원하며 인터페이스가 독립적으로 작동하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-262">If this field is set to a value between 1 and 0xFE, the device supports different class specifications on different interfaces and the interfaces may not operate independently.</span></span> <span data-ttu-id="b84e1-263">이 값은 집계 인터페이스에 사용되는 클래스 정의를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-263">This value identifies the class definition used for the aggregate interfaces.</span></span><br /><span data-ttu-id="b84e1-264">이 필드가 0xFF로 설정되면 디바이스 클래스는 공급업체와 관련이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-264">If this field is set to 0xFF, the device class is vendor specific.</span></span> |
| <span data-ttu-id="b84e1-265">5</span><span class="sxs-lookup"><span data-stu-id="b84e1-265">5</span></span>      | <span data-ttu-id="b84e1-266">bDeviceSubClass</span><span class="sxs-lookup"><span data-stu-id="b84e1-266">bDeviceSubClass</span></span>    | <span data-ttu-id="b84e1-267">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-267">1</span></span>    | <span data-ttu-id="b84e1-268">하위 클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-268">SubClass</span></span> | <span data-ttu-id="b84e1-269">하위 클래스 코드(USB-IF에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-269">Subclass code (assigned by USB-IF).</span></span><br /><span data-ttu-id="b84e1-270">이러한 코드는 bDeviceClass 필드의 값으로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-270">These codes are qualified by the value of the bDeviceClass field.</span></span> <span data-ttu-id="b84e1-271">bDeviceClass 필드를 0으로 초기화하는 경우 이 필드도 0으로 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-271">If the bDeviceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="b84e1-272">bDeviceClass 필드가 0xFF로 설정되지 않은 경우 모든 값은 USB에서 할당하도록 예약됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-272">If the bDeviceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="b84e1-273">6</span><span class="sxs-lookup"><span data-stu-id="b84e1-273">6</span></span>      | <span data-ttu-id="b84e1-274">bDeviceProtocol</span><span class="sxs-lookup"><span data-stu-id="b84e1-274">bDeviceProtocol</span></span>    | <span data-ttu-id="b84e1-275">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-275">1</span></span>    | <span data-ttu-id="b84e1-276">프로토콜</span><span class="sxs-lookup"><span data-stu-id="b84e1-276">Protocol</span></span> | <span data-ttu-id="b84e1-277">프로토콜 코드(USB-IF에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-277">Protocol code (assigned by USB-IF).</span></span><br /><span data-ttu-id="b84e1-278">이러한 코드는 bDeviceClass 및 bDeviceSubClass 필드의 값으로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-278">These codes are qualified by the value of the bDeviceClass and the bDeviceSubClass fields.</span></span> <span data-ttu-id="b84e1-279">디바이스에서 인터페이스 기반이 아닌 디바이스 기반으로 클래스 관련 프로토콜을 지원하는 경우 이 코드는 디바이스 클래스의 사양에 정의된 대로 디바이스에서 사용하는 프로토콜을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-279">If a device supports class-specific protocols on a device basis as opposed to an interface basis, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span> <span data-ttu-id="b84e1-280">이 필드를 0으로 초기화하면 디바이스에 따라 클래스 관련 프로토콜이 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-280">If this field is reset to 0, the device does not use class specific protocols on a device basis.</span></span><br /><span data-ttu-id="b84e1-281">그러나 인터페이스에 따라 클래스 관련 프로토콜을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-281">However, it may use class specific protocols on an interface basis.</span></span><br /><span data-ttu-id="b84e1-282">이 필드를 0xFF로 설정하면 디바이스에 따라 공급업체의 프로토콜이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-282">If this field is set to 0xFF, the device uses a vendor specific protocol on a device basis.</span></span> |
| <span data-ttu-id="b84e1-283">7</span><span class="sxs-lookup"><span data-stu-id="b84e1-283">7</span></span>      | <span data-ttu-id="b84e1-284">bMaxPacketSize0</span><span class="sxs-lookup"><span data-stu-id="b84e1-284">bMaxPacketSize0</span></span>    | <span data-ttu-id="b84e1-285">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-285">1</span></span>    | <span data-ttu-id="b84e1-286">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-286">Number</span></span>   | <span data-ttu-id="b84e1-287">엔드포인트 0의 최대 패킷 크기(8, 16, 32 또는 64바이트 크기만 유효)</span><span class="sxs-lookup"><span data-stu-id="b84e1-287">Maximum packet size for endpoint zero (only byte sizes of 8, 16, 32, or 64 are valid)</span></span> |
| <span data-ttu-id="b84e1-288">8</span><span class="sxs-lookup"><span data-stu-id="b84e1-288">8</span></span>      | <span data-ttu-id="b84e1-289">idVendor</span><span class="sxs-lookup"><span data-stu-id="b84e1-289">idVendor</span></span>           | <span data-ttu-id="b84e1-290">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-290">2</span></span>    | <span data-ttu-id="b84e1-291">ID</span><span class="sxs-lookup"><span data-stu-id="b84e1-291">ID</span></span>       | <span data-ttu-id="b84e1-292">공급업체 ID(USB-IF에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-292">Vendor ID (assigned by USB-IF)</span></span> |
| <span data-ttu-id="b84e1-293">10</span><span class="sxs-lookup"><span data-stu-id="b84e1-293">10</span></span>     | <span data-ttu-id="b84e1-294">idProduct</span><span class="sxs-lookup"><span data-stu-id="b84e1-294">idProduct</span></span>          | <span data-ttu-id="b84e1-295">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-295">2</span></span>    | <span data-ttu-id="b84e1-296">ID</span><span class="sxs-lookup"><span data-stu-id="b84e1-296">ID</span></span>       | <span data-ttu-id="b84e1-297">제품 ID(제조업체에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-297">Product ID (assigned by the Manufacturer)</span></span> |
| <span data-ttu-id="b84e1-298">12</span><span class="sxs-lookup"><span data-stu-id="b84e1-298">12</span></span>     | <span data-ttu-id="b84e1-299">bcdDevice</span><span class="sxs-lookup"><span data-stu-id="b84e1-299">bcdDevice</span></span>          | <span data-ttu-id="b84e1-300">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-300">2</span></span>    | <span data-ttu-id="b84e1-301">BCD</span><span class="sxs-lookup"><span data-stu-id="b84e1-301">BCD</span></span>      | <span data-ttu-id="b84e1-302">이진 코딩된 10진수 디바이스 릴리스 번호</span><span class="sxs-lookup"><span data-stu-id="b84e1-302">Device release number in binary-coded decimal</span></span> |
| <span data-ttu-id="b84e1-303">14</span><span class="sxs-lookup"><span data-stu-id="b84e1-303">14</span></span>     | <span data-ttu-id="b84e1-304">iManufacturer</span><span class="sxs-lookup"><span data-stu-id="b84e1-304">iManufacturer</span></span>      | <span data-ttu-id="b84e1-305">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-305">1</span></span>    | <span data-ttu-id="b84e1-306">인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-306">Index</span></span>    | <span data-ttu-id="b84e1-307">제조업체를 설명하는 문자열 설명자 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-307">Index of string descriptor describing manufacturer</span></span> |
| <span data-ttu-id="b84e1-308">15</span><span class="sxs-lookup"><span data-stu-id="b84e1-308">15</span></span>     | <span data-ttu-id="b84e1-309">iProduct</span><span class="sxs-lookup"><span data-stu-id="b84e1-309">iProduct</span></span>           | <span data-ttu-id="b84e1-310">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-310">1</span></span>    | <span data-ttu-id="b84e1-311">인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-311">Index</span></span>    | <span data-ttu-id="b84e1-312">제품을 설명하는 문자열 설명자 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-312">Index of string descriptor describing product</span></span> |
| <span data-ttu-id="b84e1-313">16</span><span class="sxs-lookup"><span data-stu-id="b84e1-313">16</span></span>     | <span data-ttu-id="b84e1-314">iSerialNumbe</span><span class="sxs-lookup"><span data-stu-id="b84e1-314">iSerialNumbe</span></span>       | <span data-ttu-id="b84e1-315">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-315">1</span></span>    | <span data-ttu-id="b84e1-316">인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-316">Index</span></span>    | <span data-ttu-id="b84e1-317">디바이스의 일련 번호를 설명하는 문자열 설명자 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-317">Index of string descriptor describing the device's serial number</span></span> |
| <span data-ttu-id="b84e1-318">17</span><span class="sxs-lookup"><span data-stu-id="b84e1-318">17</span></span>     | <span data-ttu-id="b84e1-319">bNumConfigurations</span><span class="sxs-lookup"><span data-stu-id="b84e1-319">bNumConfigurations</span></span> | <span data-ttu-id="b84e1-320">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-320">1</span></span>    | <span data-ttu-id="b84e1-321">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-321">Number</span></span>   | <span data-ttu-id="b84e1-322">가능한 구성 수</span><span class="sxs-lookup"><span data-stu-id="b84e1-322">Number of possible configurations</span></span> |

<span data-ttu-id="b84e1-323">USBX는 다음과 같이 USB 디바이스 설명자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-323">USBX defines a USB device descriptor as follows:</span></span>

```c
typedef struct UX_DEVICE_DESCRIPTOR_STRUCT
{
    UINT      bLength;
    UINT      bDescriptorType;
    USHORT    bcdUSB;
    UINT      bDeviceClass;
    UINT      bDeviceSubClass;
    UINT      bDeviceProtocol;
    UINT      bMaxPacketSize0;
    USHORT    idVendor;
    USHORT    idProduct;
    USHORT    bcdDevice;
    UINT      iManufacturer;
    UINT      iProduct;
    UINT      iSerialNumber;
    UINT      bNumConfigurations;
} UX_DEVICE_DESCRIPTOR;
```

<span data-ttu-id="b84e1-324">USB 디바이스 설명자는 다음 설명처럼 디바이스 컨테이너의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-324">The USB device descriptor is part of a device container described as:</span></span>

```c
typedef struct UX_DEVICE_STRUCT
{
    ULONG ux_device_handle;
    ULONG ux_device_type;
    ULONG ux_device_state;
    ULONG ux_device_address;
    ULONG ux_device_speed;
    ULONG ux_device_port_location;
    ULONG ux_device_max_power;
    ULONG ux_device_power_source;
    UINT ux_device_current_configuration;

    TX_SEMAPHORE ux_device_protection_semaphore;
    struct UX_DEVICE_STRUCT *ux_device_parent; 
    struct UX_HOST_CLASS_STRUCT *ux_device_class; 
    VOID *ux_device_class_instance;
    struct UX_HCD_STRUCT *ux_device_hcd;
    struct UX_CONFIGURATION_STRUCT *ux_device_first_configuration; 
    struct UX_DEVICE_STRUCT *ux_device_next_device;
    struct UX_DEVICE_DESCRIPTOR_STRUCT ux_device_descriptor;
    struct UX_ENDPOINT_STRUCT ux_device_control_endpoint;
    struct UX_HUB_TT_STRUCT ux_device_hub_tt[UX_MAX_TT];
} UX_DEVICE;
```

- <span data-ttu-id="b84e1-325">**ux_device_handle**: 디바이스의 핸들.</span><span class="sxs-lookup"><span data-stu-id="b84e1-325">**ux_device_handle**: Handle of the device.</span></span> <span data-ttu-id="b84e1-326">일반적으로 디바이스에 대한 이 구조의 인스턴스 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-326">This is typically the address of the instance of this structure for the device.</span></span>
- <span data-ttu-id="b84e1-327">**ux_device_type**: 사용되지 않는 값.</span><span class="sxs-lookup"><span data-stu-id="b84e1-327">**ux_device_type**: Obsolete value.</span></span> <span data-ttu-id="b84e1-328">사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-328">Unused.</span></span>
- <span data-ttu-id="b84e1-329">**ux_device_state**: 디바이스 상태이며 다음 값 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-329">**ux_device_state**: Device State, which can have one of the following values:</span></span>
    - <span data-ttu-id="b84e1-330">**UX_DEVICE_RESET**                0</span><span class="sxs-lookup"><span data-stu-id="b84e1-330">**UX_DEVICE_RESET**                0</span></span>
    - <span data-ttu-id="b84e1-331">**UX_DEVICE_ATTACHED**             1</span><span class="sxs-lookup"><span data-stu-id="b84e1-331">**UX_DEVICE_ATTACHED**             1</span></span>
    - <span data-ttu-id="b84e1-332">**UX_DEVICE_ADDRESSED**            2</span><span class="sxs-lookup"><span data-stu-id="b84e1-332">**UX_DEVICE_ADDRESSED**            2</span></span>
    - <span data-ttu-id="b84e1-333">**UX_DEVICE_CONFIGURED**           3</span><span class="sxs-lookup"><span data-stu-id="b84e1-333">**UX_DEVICE_CONFIGURED**           3</span></span>
    - <span data-ttu-id="b84e1-334">**UX_DEVICE_SUSPENDED**            4</span><span class="sxs-lookup"><span data-stu-id="b84e1-334">**UX_DEVICE_SUSPENDED**            4</span></span>
    - <span data-ttu-id="b84e1-335">**UX_DEVICE_RESUMED**              5</span><span class="sxs-lookup"><span data-stu-id="b84e1-335">**UX_DEVICE_RESUMED**              5</span></span>
    - <span data-ttu-id="b84e1-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span><span class="sxs-lookup"><span data-stu-id="b84e1-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span></span>
    - <span data-ttu-id="b84e1-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span><span class="sxs-lookup"><span data-stu-id="b84e1-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span></span>
    - <span data-ttu-id="b84e1-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span><span class="sxs-lookup"><span data-stu-id="b84e1-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span></span>
    - <span data-ttu-id="b84e1-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span><span class="sxs-lookup"><span data-stu-id="b84e1-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span></span>
    - <span data-ttu-id="b84e1-340">**UX_DEVICE_REMOVED**              10</span><span class="sxs-lookup"><span data-stu-id="b84e1-340">**UX_DEVICE_REMOVED**              10</span></span>
    - <span data-ttu-id="b84e1-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span><span class="sxs-lookup"><span data-stu-id="b84e1-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span></span>
- <span data-ttu-id="b84e1-342">**ux_device_address**: **SET_ADDRESS** 명령이 수락된 후의 디바이스 주소(1 ~ 127)</span><span class="sxs-lookup"><span data-stu-id="b84e1-342">**ux_device_address**: Address of the device after the **SET_ADDRESS** command has been accepted (from 1 to 127).</span></span>
- <span data-ttu-id="b84e1-343">**ux_device_speed**: 디바이스의 속도:</span><span class="sxs-lookup"><span data-stu-id="b84e1-343">**ux_device_speed**: Speed of the device:</span></span>
    - <span data-ttu-id="b84e1-344">**UX_LOW_SPEED_DEVICE**      0</span><span class="sxs-lookup"><span data-stu-id="b84e1-344">**UX_LOW_SPEED_DEVICE**      0</span></span>
    - <span data-ttu-id="b84e1-345">**UX_FULL_SPEED_DEVICE**     1</span><span class="sxs-lookup"><span data-stu-id="b84e1-345">**UX_FULL_SPEED_DEVICE**     1</span></span>
    - <span data-ttu-id="b84e1-346">**UX_HIGH_SPEED_DEVICE**     2</span><span class="sxs-lookup"><span data-stu-id="b84e1-346">**UX_HIGH_SPEED_DEVICE**     2</span></span>
- <span data-ttu-id="b84e1-347">**ux_device_port_location**: 부모 디바이스의 포트 인덱스(루트 허브 또는 허브)</span><span class="sxs-lookup"><span data-stu-id="b84e1-347">**ux_device_port_location**: Index of the port of the parent device (root hub or hub).</span></span>
- <span data-ttu-id="b84e1-348">**ux_device_max_power**: 선택한 구성에서 디바이스가 사용할 수 있는 최대 전력(mA)</span><span class="sxs-lookup"><span data-stu-id="b84e1-348">**ux_device_max_power**: Maximum power in mA that the device may take in the selected configuration.</span></span>
- <span data-ttu-id="b84e1-349">**ux_device_power_source**: 다음 두 값 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-349">**ux_device_power_source**: Can be one of the two following values:</span></span>
    - <span data-ttu-id="b84e1-350">**UX_DEVICE_BUS_POWERED**     1</span><span class="sxs-lookup"><span data-stu-id="b84e1-350">**UX_DEVICE_BUS_POWERED**     1</span></span>
    - <span data-ttu-id="b84e1-351">**UX_DEVICE_SELF_POWERED**    2</span><span class="sxs-lookup"><span data-stu-id="b84e1-351">**UX_DEVICE_SELF_POWERED**    2</span></span>
- <span data-ttu-id="b84e1-352">**ux_device_current_configuration**:이 디바이스에서 사용 중인 현재 구성의 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-352">**ux_device_current_configuration**: Index of the current configuration being used by this device.</span></span>
- <span data-ttu-id="b84e1-353">**ux_device_parent**: 이 디바이스의 부모에 대한 디바이스 컨테이너 포인터.</span><span class="sxs-lookup"><span data-stu-id="b84e1-353">**ux_device_parent**: Device container pointer of the parent of this device.</span></span> <span data-ttu-id="b84e1-354">포인터가 null이면 부모는 컨트롤러의 루트 허브입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-354">If the pointer is null, the parent is the root hub of the controller.</span></span>
- <span data-ttu-id="b84e1-355">**ux_device_class**: 이 디바이스를 소유한 클래스 형식에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-355">**ux_device_class**: Pointer to the class type that owns this device.</span></span>
- <span data-ttu-id="b84e1-356">**ux_device_class_instance**: 이 디바이스를 소유한 클래스의 인스턴스에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-356">**ux_device_class_instance**: Pointer to the instance of the class that owns this device.</span></span>
- <span data-ttu-id="b84e1-357">**ux_device_hcd**: 이 디바이스가 연결된 USB 호스트 컨트롤러 인스턴스</span><span class="sxs-lookup"><span data-stu-id="b84e1-357">**ux_device_hcd**: USB Host Controller Instance where this device is attached.</span></span>
- <span data-ttu-id="b84e1-358">**ux_device_first_configuration**: 이 디바이스의 첫 번째 구성 컨테이너에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-358">**ux_device_first_configuration**: Pointer to the first configuration container for this device.</span></span>
- <span data-ttu-id="b84e1-359">**ux_device_next_device**: USBX에서 발견한 버스의 디바이스 목록에서 다음 디바이스를 가리키는 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-359">**ux_device_next_device**: Pointer to the next device in the list of device on any of the buses detected by USBX.</span></span>
- <span data-ttu-id="b84e1-360">**ux_device_descriptor**: USB 디바이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-360">**ux_device_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="b84e1-361">**ux_device_control_endpoint**: 이 디바이스에서 사용하는 기본 제어 엔드포인트의 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-361">**ux_device_control_endpoint**: Descriptor of the default control endpoint used by this device.</span></span>
- <span data-ttu-id="b84e1-362">**ux_device_hub_tt**: 디바이스의 허브 TT 배열</span><span class="sxs-lookup"><span data-stu-id="b84e1-362">**ux_device_hub_tt**: Array of Hub TTs for the device</span></span>

### <a name="configuration-descriptors"></a><span data-ttu-id="b84e1-363">구성 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-363">Configuration Descriptors</span></span>

<span data-ttu-id="b84e1-364">구성 설명자는 특정 디바이스 구성에 대한 정보를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-364">The configuration descriptor describes information about a specific device configuration.</span></span> <span data-ttu-id="b84e1-365">USB 디바이스는 하나 이상의 구성 설명자를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-365">A USB device may contain one or more configuration descriptors.</span></span> <span data-ttu-id="b84e1-366">디바이스 설명자의 **bNumConfigurations** 필드는 구성 설명자의 수를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-366">The **bNumConfigurations** field in the device descriptor indicates the number of configuration descriptors.</span></span> <span data-ttu-id="b84e1-367">설명자에는 **bConfigurationValue** 필드가 포함되어 있습니다. 이 필드의 값을 Set Configuration 요청의 매개 변수로 사용하면 디바이스는 설명된 구성을 전제로 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-367">The descriptor contains a **bConfigurationValue** field with a value that, when used as a parameter to the Set Configuration request, causes the device to assume the described configuration.</span></span>

<span data-ttu-id="b84e1-368">설명자는 구성에서 제공하는 인터페이스 수를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-368">The descriptor describes the number of interfaces provided by the configuration.</span></span> <span data-ttu-id="b84e1-369">각 인터페이스는 디바이스 내의 논리 함수를 나타내며 독립적으로 작동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-369">Each interface represents a logical function within the device and may operate independently.</span></span> <span data-ttu-id="b84e1-370">예를 들어 USB 오디오 스피커에는 오디오 스트리밍을 위한 인터페이스, 오디오 제어를 위한 인터페이스, 스피커 단추를 관리하기 위한 HID 인터페이스가 각각 하나씩 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-370">For instance a USB audio speaker may have three interfaces, one for audio streaming, one for audio control, and one HID interface to manage the speaker's buttons.</span></span>

<span data-ttu-id="b84e1-371">호스트에서 구성 설명자에 대한 GET_DESCRIPTOR 요청을 실행하면 관련된 모든 인터페이스 및 엔드포인트 설명자가 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-371">When the host issues a GET_DESCRIPTOR request for the configuration descriptor, all related interface and endpoint descriptors are returned.</span></span>

| <span data-ttu-id="b84e1-372">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-372">Offset</span></span> | <span data-ttu-id="b84e1-373">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-373">Field</span></span>               | <span data-ttu-id="b84e1-374">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-374">Size</span></span> | <span data-ttu-id="b84e1-375">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-375">Value</span></span>    | <span data-ttu-id="b84e1-376">Description</span><span class="sxs-lookup"><span data-stu-id="b84e1-376">Description</span></span>                       |
| ------ | ------------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="b84e1-377">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-377">0</span></span>      | <span data-ttu-id="b84e1-378">bLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-378">bLength</span></span>             | <span data-ttu-id="b84e1-379">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-379">1</span></span>    | <span data-ttu-id="b84e1-380">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-380">Number</span></span>   | <span data-ttu-id="b84e1-381">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-381">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="b84e1-382">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-382">1</span></span>      | <span data-ttu-id="b84e1-383">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-383">bDescriptorType</span></span>     | <span data-ttu-id="b84e1-384">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-384">1</span></span>    | <span data-ttu-id="b84e1-385">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-385">Constant</span></span> | <span data-ttu-id="b84e1-386">CONFIGURATION</span><span class="sxs-lookup"><span data-stu-id="b84e1-386">CONFIGURATION</span></span>                     |
| <span data-ttu-id="b84e1-387">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-387">2</span></span>      | <span data-ttu-id="b84e1-388">wTotalLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-388">wTotalLength</span></span>        | <span data-ttu-id="b84e1-389">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-389">2</span></span>    | <span data-ttu-id="b84e1-390">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-390">Number</span></span>   | <span data-ttu-id="b84e1-391">이 구성에 대해 반환된 총 데이터 길이.</span><span class="sxs-lookup"><span data-stu-id="b84e1-391">Total length of data returned for this configuration.</span></span> <span data-ttu-id="b84e1-392">이 구성에 대해 반환된 모든 설명자(구성, 인터페이스, 엔드포인트 및 클래스 또는 공급업체 설명자)의 총 길이를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-392">Includes the combined length of all descriptors (configuration, interface, endpoint, and class or vendor specific) returned for this configuration.</span></span> |
| <span data-ttu-id="b84e1-393">4</span><span class="sxs-lookup"><span data-stu-id="b84e1-393">4</span></span>      | <span data-ttu-id="b84e1-394">bNumInterfaces</span><span class="sxs-lookup"><span data-stu-id="b84e1-394">bNumInterfaces</span></span>      | <span data-ttu-id="b84e1-395">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-395">1</span></span>    | <span data-ttu-id="b84e1-396">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-396">Number</span></span>   | <span data-ttu-id="b84e1-397">이 구성에서 지원하는 인터페이스 수</span><span class="sxs-lookup"><span data-stu-id="b84e1-397">Number of interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="b84e1-398">5</span><span class="sxs-lookup"><span data-stu-id="b84e1-398">5</span></span>      | <span data-ttu-id="b84e1-399">bConfigurationValue</span><span class="sxs-lookup"><span data-stu-id="b84e1-399">bConfigurationValue</span></span> | <span data-ttu-id="b84e1-400">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-400">1</span></span>    | <span data-ttu-id="b84e1-401">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-401">Number</span></span>   | <span data-ttu-id="b84e1-402">이 구성을 선택하려면</span><span class="sxs-lookup"><span data-stu-id="b84e1-402">Value to use as an argument to Set</span></span><br/><span data-ttu-id="b84e1-403">Set Configuration의 인수로 사용해야 하는 값</span><span class="sxs-lookup"><span data-stu-id="b84e1-403">Configuration to select this configuration.</span></span> |
| <span data-ttu-id="b84e1-404">6</span><span class="sxs-lookup"><span data-stu-id="b84e1-404">6</span></span>      | <span data-ttu-id="b84e1-405">iConfiguration</span><span class="sxs-lookup"><span data-stu-id="b84e1-405">iConfiguration</span></span>      | <span data-ttu-id="b84e1-406">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-406">1</span></span>    | <span data-ttu-id="b84e1-407">인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-407">Index</span></span>    | <span data-ttu-id="b84e1-408">이 구성을 설명하는 문자열 설명자 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-408">Index of string descriptor describing this configuration.</span></span> |
| <span data-ttu-id="b84e1-409">7</span><span class="sxs-lookup"><span data-stu-id="b84e1-409">7</span></span>      | <span data-ttu-id="b84e1-410">bMAttributes</span><span class="sxs-lookup"><span data-stu-id="b84e1-410">bMAttributes</span></span>        | <span data-ttu-id="b84e1-411">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-411">1</span></span>    | <span data-ttu-id="b84e1-412">Bitmap</span><span class="sxs-lookup"><span data-stu-id="b84e1-412">Bitmap</span></span>   | <span data-ttu-id="b84e1-413">구성 특성 D7 버스 전력 사용</span><span class="sxs-lookup"><span data-stu-id="b84e1-413">Configuration characteristics D7 Bus Powered</span></span><br /><span data-ttu-id="b84e1-414">D6 자체 전력</span><span class="sxs-lookup"><span data-stu-id="b84e1-414">D6 Self Powered</span></span><br /><span data-ttu-id="b84e1-415">D5 원격 절전 모드 해제</span><span class="sxs-lookup"><span data-stu-id="b84e1-415">D5 Remote Wakeup</span></span><br /><span data-ttu-id="b84e1-416">D4..0 예약됨(0으로 초기화)</span><span class="sxs-lookup"><span data-stu-id="b84e1-416">D4..0 Reserved (reset to 0)</span></span><br /><span data-ttu-id="b84e1-417">버스의 전력을 사용하는 디바이스 구성이며 로컬 소스는 D7 및 D6을 모두 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-417">A device configuration that uses power from the bus and a local source sets both D7 and D6.</span></span> <span data-ttu-id="b84e1-418">런타임의 실제 전력원은 Get Status 디바이스 요청을 사용하여 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-418">The actual power source at runtime may be determined using the Get Status device request.</span></span><br /><span data-ttu-id="b84e1-419">디바이스 구성에서 원격 절전 모드 해제를 지원하는 경우 D5는 1로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-419">If a device configuration supports remote wakeup, D5 is set to 1.</span></span> |
| <span data-ttu-id="b84e1-420">8</span><span class="sxs-lookup"><span data-stu-id="b84e1-420">8</span></span>      | <span data-ttu-id="b84e1-421">MaxPower</span><span class="sxs-lookup"><span data-stu-id="b84e1-421">MaxPower</span></span>            | <span data-ttu-id="b84e1-422">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-422">1</span></span>    | <span data-ttu-id="b84e1-423">mA</span><span class="sxs-lookup"><span data-stu-id="b84e1-423">mA</span></span>       | <span data-ttu-id="b84e1-424">디바이스가 완전히 작동할 때 이 구성에서 USB 디바이스가 사용하는 버스의 최대 소비 전력.</span><span class="sxs-lookup"><span data-stu-id="b84e1-424">Maximum power consumption of USB device from the bus in this specific configuration when the device is fully operational.</span></span><br /><span data-ttu-id="b84e1-425">2mA 단위로 표현됩니다(예: 50 = 100mA).</span><span class="sxs-lookup"><span data-stu-id="b84e1-425">Expressed in 2 mA units (e.g., 50 = 100 mA).</span></span><br /><span data-ttu-id="b84e1-426">참고: 디바이스 구성은 버스 전력을 사용하는 구성인지 아니면 자체 전력을 사용하는 구성인지 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-426">Note: A device configuration reports whether the configuration is bus-powered or self-powered.</span></span><br /><span data-ttu-id="b84e1-427">디바이스 상태는 디바이스가 현재 자체 전력으로 구동하는지 여부를 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-427">Device status reports whether the device is currently self-powered.</span></span> <span data-ttu-id="b84e1-428">디바이스는 외부 전원에서 분리되면 더 이상 자체 전력으로 구동되지 않는다는 것을 알리기 위해 디바이스 상태를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-428">If a device is disconnected from its external power source, it updates device status to indicate that it is no longer self-powered.</span></span> |

<span data-ttu-id="b84e1-429">USBX는 다음과 같이 USB 구성 설명자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-429">USBX defines a USB configuration descriptor as follows.</span></span>

```c
typedef struct UX_CONFIGURATION_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT wTotalLength;
    UINT bNumInterfaces;
    UINT bConfigurationValue;
    UINT iConfiguration;
    UINT bmAttributes;
    UINT MaxPower;
} UX_CONFIGURATION_DESCRIPTOR;
```

<span data-ttu-id="b84e1-430">USB 구성 설명자는 아래에 설명된 것처럼 구성 컨테이너의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-430">The USB configuration descriptor is part of a configuration container described as shown below.</span></span>

```c
typedef struct UX_CONFIGURATION_STRUCT
{
    ULONG ux_configuration_handle;
    ULONG ux_configuration_state;
    struct UX_CONFIGURATION_DESCRIPTOR_STRUCT ux_configuration_descriptor;
    struct UX_INTERFACE_STRUCT *ux_configuration_first_interface;
    struct UX_CONFIGURATION_STRUCT *ux_configuration_next_configuration;
    struct UX_DEVICE_STRUCT *ux_configuration_device;
} UX_CONFIGURATION;
```

- <span data-ttu-id="b84e1-431">**ux_configuration_handle**: 구성의 핸들.</span><span class="sxs-lookup"><span data-stu-id="b84e1-431">**ux_configuration_handle**: Handle of the configuration.</span></span> <span data-ttu-id="b84e1-432">일반적으로 구성에 대한 이 구조의 인스턴스 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-432">This is typically the address of the instance of this structure for the configuration.</span></span>
- <span data-ttu-id="b84e1-433">**ux_configuration_state**: 구성 상태</span><span class="sxs-lookup"><span data-stu-id="b84e1-433">**ux_configuration_state**: State of the configuration.</span></span>
- <span data-ttu-id="b84e1-434">**ux_configuration_descriptor**: USB 디바이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-434">**ux_configuration_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="b84e1-435">**ux_configuration_first_interface**: 이 구성의 첫 번째 인터페이스에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-435">**ux_configuration_first_interface**: Pointer to the first interface for this configuration.</span></span>
- <span data-ttu-id="b84e1-436">**ux_configuration_next_configuration**: 동일한 디바이스의 다음 구성에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-436">**ux_configuration_next_configuration**: Pointer to the next configuration for the same device.</span></span>
- <span data-ttu-id="b84e1-437">**ux_configuration_device**: 이 구성의 디바이스 소유자에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-437">**ux_configuration_device**: Pointer to the device owner of this configuration.</span></span>

### <a name="interface-descriptors"></a><span data-ttu-id="b84e1-438">인터페이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-438">Interface Descriptors</span></span>

<span data-ttu-id="b84e1-439">인터페이스 설명자는 구성 내의 특정 인터페이스에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-439">The interface descriptor describes a specific interface within a configuration.</span></span> <span data-ttu-id="b84e1-440">인터페이스는 USB 디바이스 내의 논리 함수입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-440">An interface is a logical function within a USB device.</span></span> <span data-ttu-id="b84e1-441">구성은 하나 이상의 인터페이스를 제공하며, 각 인터페이스에는 구성 내의 고유한 엔드포인트 세트를 설명하는 0개 이상의 엔드포인트 설명자가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-441">A configuration provides one or more interfaces, each with zero or more endpoint descriptors describing a unique set of endpoints within the configuration.</span></span> <span data-ttu-id="b84e1-442">구성에서 두 개 이상의 인터페이스를 지원하는 경우 특정 인터페이스의 엔드포인트 설명자는 지정된 구성에 대한 **GET_DESCRIPTOR** 요청에서 반환되는 데이터의 인터페이스 설명자를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-442">When a configuration supports more than one interface, the endpoint descriptors for a particular interface follow the interface descriptor in the data returned by the **GET_DESCRIPTOR** request for the specified configuration.</span></span>

<span data-ttu-id="b84e1-443">인터페이스 설명자는 항상 구성 설명자의 일부로 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-443">An interface descriptor is always returned as part of a configuration descriptor.</span></span> <span data-ttu-id="b84e1-444">인터페이스 설명자는 GET_DESCRIPTOR 요청을 통해 직접 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-444">An interface descriptor cannot be directly access by a GET_DESCRIPTOR request.</span></span>

<span data-ttu-id="b84e1-445">인터페이스는 디바이스를 구성한 후 엔드포인트 및/또는 해당 특성이 달라지는 것을 허용하는 대체 설정을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-445">An interface may include alternate settings that allow the endpoints and/or their characteristics to be varied after the device has been configured.</span></span> <span data-ttu-id="b84e1-446">인터페이스의 기본 설정은 항상 대체 설정 0입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-446">The default setting for an interface is always alternate setting zero.</span></span> <span data-ttu-id="b84e1-447">클래스에서 현재 대체 설정을 변경하도록 선택하여 연결된 엔드포인트의 인터페이스 동작 및 특성을 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-447">A class can select to change the current alternate setting to change the interface behavior and the characteristics of the associated endpoints.</span></span> <span data-ttu-id="b84e1-448">SET_INTERFACE 요청은 대체 설정을 선택하거나 기본 설정으로 되돌리는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-448">The SET_INTERFACE request is used to select an alternate setting or to return to the default setting.</span></span>

<span data-ttu-id="b84e1-449">대체 설정을 사용하면 다른 인터페이스는 작동 중인 상태로 유지되면서 디바이스 구성의 일부가 달라질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-449">Alternate settings allow a portion of the device configuration to be varied while other interfaces remain in operation.</span></span> <span data-ttu-id="b84e1-450">구성에 해당 인터페이스 중 하나 이상에 대한 대체 설정이 포함되어 있으면 각 설정에 대해 별도의 인터페이스 설명자 및 연결된 엔드포인트가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-450">If a configuration has alternate settings for one or more of its interfaces, a separate interface descriptor and its associated endpoints are included for each setting.</span></span>

<span data-ttu-id="b84e1-451">디바이스 구성에 두 가지 대체 설정이 포함된 단일 인터페이스가 있으면 구성에 대한 GET_DESCRIPTOR 요청에서는 구성 설명자를 반환합니다. 그런 다음, **bInterfaceNumber** 및 **bAlternateSetting** 필드가 0으로 설정된 인터페이스 설명자를 반환하고, 그 다음에는 해당 설정에 대한 엔드포인트 설명자, 다른 인터페이스 설명자 및 연결된 엔드포인트 설명자를 차례로 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-451">If a device configuration contains a single interface with two alternate settings, the GET_DESCRIPTOR request for the configuration would return the configuration descriptor, then the interface descriptor with the **bInterfaceNumber** and **bAlternateSetting** fields set to zero and then the endpoint descriptors for that setting, followed by another interface descriptor and its associated endpoint descriptors.</span></span> <span data-ttu-id="b84e1-452">두 번째 인터페이스 설명자의 **bInterfaceNumber** 필드도 0으로 설정되지만, 두 번째 인터페이스 설명자의 **bAlternateSetting** 필드는 이 대체 설정이 첫 번째 인터페이스에 속한다는 것을 나타내는 1로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-452">The second interface descriptor's **bInterfaceNumber** field would also be set to zero, but the **bAlternateSetting** field of the second interface descriptor would be set to 1 indicating that this alternate setting belongs to the first interface.</span></span>

<span data-ttu-id="b84e1-453">인터페이스에 연결된 엔트포인트가 없을 수 있습니다. 이 경우에는 해당 인터페이스에는 기본 제어 엔드포인트만 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-453">An interface may not have any endpoints associated with it, in which case only the default control endpoint is valid for that interface.</span></span>

<span data-ttu-id="b84e1-454">대체 설정은 인터페이스와 연결된 주기적 엔드포인트에 대해 요청된 대역폭을 변경하는 데 주로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-454">Alternate settings are used mainly to change the requested bandwidth for periodic endpoints associated with the interface.</span></span> <span data-ttu-id="b84e1-455">예를 들어 USB 스피커 스트리밍 인터페이스는 등시 엔드포인트에서 대역폭 요구 사항이 0인 첫 번째 대체 설정이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-455">For example, a USB speaker streaming interface should have the first alternate setting with a 0 bandwidth demand on its isochronous endpoint.</span></span> <span data-ttu-id="b84e1-456">다른 대체 설정은 오디오 스트리밍 빈도에 따라 다른 대역폭 요구 사항을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-456">Other alternate settings may select different bandwidth requirements depending on the audio streaming frequency.</span></span>

<span data-ttu-id="b84e1-457">인터페이스의 USB 설명자는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-457">The USB descriptor for the interface is as follows:</span></span>

| <span data-ttu-id="b84e1-458">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-458">Offset</span></span> | <span data-ttu-id="b84e1-459">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-459">Field</span></span>              | <span data-ttu-id="b84e1-460">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-460">Size</span></span> | <span data-ttu-id="b84e1-461">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-461">Value</span></span>     | <span data-ttu-id="b84e1-462">설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-462">Descriptor</span></span>                              |
| ------ | ------------------ | ---- | --------- | --------------------------------------- |
| <span data-ttu-id="b84e1-463">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-463">0</span></span>      | <span data-ttu-id="b84e1-464">bLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-464">bLength</span></span>            | <span data-ttu-id="b84e1-465">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-465">1</span></span>    | <span data-ttu-id="b84e1-466">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-466">Number</span></span>    | <span data-ttu-id="b84e1-467">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-467">Size of this descriptor in bytes.</span></span>       |
| <span data-ttu-id="b84e1-468">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-468">1</span></span>      | <span data-ttu-id="b84e1-469">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-469">bDescriptorType</span></span>    | <span data-ttu-id="b84e1-470">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-470">1</span></span>    | <span data-ttu-id="b84e1-471">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-471">Constant</span></span>  | <span data-ttu-id="b84e1-472">인터페이스 설명자 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-472">INTERFACE Descriptor Type</span></span>               |
| <span data-ttu-id="b84e1-473">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-473">2</span></span>      | <span data-ttu-id="b84e1-474">bInterfaceNumber</span><span class="sxs-lookup"><span data-stu-id="b84e1-474">bInterfaceNumber</span></span>   | <span data-ttu-id="b84e1-475">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-475">1</span></span>    | <span data-ttu-id="b84e1-476">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-476">Number</span></span>    | <span data-ttu-id="b84e1-477">인터페이스 수.</span><span class="sxs-lookup"><span data-stu-id="b84e1-477">Number of interface.</span></span> <span data-ttu-id="b84e1-478">이 구성에서 지원하는 동시 인터페이스 배열의 인덱스를 식별하며 0부터 시작하는 값</span><span class="sxs-lookup"><span data-stu-id="b84e1-478">Zero-based value identifying the index in the array of concurrent interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="b84e1-479">3</span><span class="sxs-lookup"><span data-stu-id="b84e1-479">3</span></span>      | <span data-ttu-id="b84e1-480">bAltenateSetting</span><span class="sxs-lookup"><span data-stu-id="b84e1-480">bAltenateSetting</span></span>   | <span data-ttu-id="b84e1-481">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-481">1</span></span>    | <span data-ttu-id="b84e1-482">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-482">Number</span></span>    | <span data-ttu-id="b84e1-483">이전 필드에서 식별된 인터페이스의 대체 설정을 선택하는 데 사용되는 값</span><span class="sxs-lookup"><span data-stu-id="b84e1-483">Value used to select alternate setting for the interface identified in the prior field.</span></span> |
| <span data-ttu-id="b84e1-484">4</span><span class="sxs-lookup"><span data-stu-id="b84e1-484">4</span></span>      | <span data-ttu-id="b84e1-485">bNumEndpoints</span><span class="sxs-lookup"><span data-stu-id="b84e1-485">bNumEndpoints</span></span>      | <span data-ttu-id="b84e1-486">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-486">1</span></span>    | <span data-ttu-id="b84e1-487">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-487">Number</span></span>    | <span data-ttu-id="b84e1-488">이 인터페이스에서 사용하는 엔드포인트 수(엔드포인트 0 제외).</span><span class="sxs-lookup"><span data-stu-id="b84e1-488">Number of endpoints used by this interface (excluding endpoint zero).</span></span> <span data-ttu-id="b84e1-489">이 값이 0이면 이 인터페이스는 엔드포인트 0만 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-489">If this value is 0, this interface only uses endpoint zero.</span></span> |
| <span data-ttu-id="b84e1-490">5</span><span class="sxs-lookup"><span data-stu-id="b84e1-490">5</span></span>      | <span data-ttu-id="b84e1-491">bInterfaceClass</span><span class="sxs-lookup"><span data-stu-id="b84e1-491">bInterfaceClass</span></span>    | <span data-ttu-id="b84e1-492">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-492">1</span></span>    | <span data-ttu-id="b84e1-493">클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-493">Class</span></span>     | <span data-ttu-id="b84e1-494">클래스 코드(USB에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-494">Class code (assigned by USB)</span></span><br /><span data-ttu-id="b84e1-495">이 필드를 0으로 초기화하면 인터페이스는 USB에서 지정한 디바이스 클래스에 속하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-495">If this field is reset to 0, the interface does not belong to any USB specified device class.</span></span><br /><span data-ttu-id="b84e1-496">이 필드가 0xFF로 설정되면 인터페이스 클래스는 공급업체와 관련이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-496">If this field is set to 0xFF, the interface class is vendor specific.</span></span><br /><span data-ttu-id="b84e1-497">그 외의 값은 USB에서 할당하도록 예약되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-497">All other values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="b84e1-498">6</span><span class="sxs-lookup"><span data-stu-id="b84e1-498">6</span></span>      | <span data-ttu-id="b84e1-499">bInterfaceSubClass</span><span class="sxs-lookup"><span data-stu-id="b84e1-499">bInterfaceSubClass</span></span> | <span data-ttu-id="b84e1-500">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-500">1</span></span>    | <span data-ttu-id="b84e1-501">하위 클래스</span><span class="sxs-lookup"><span data-stu-id="b84e1-501">SubClass</span></span>  | <span data-ttu-id="b84e1-502">하위 클래스 코드(USB에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-502">Subclass code (assigned by USB).</span></span><br /><span data-ttu-id="b84e1-503">이러한 코드는 bInterfaceClass 필드의 값으로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-503">These codes are qualified by the value of the bInterfaceClass field.</span></span> <span data-ttu-id="b84e1-504">bInterfaceClass 필드를 0으로 초기화하는 경우 이 필드도 0으로 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-504">If the bInterfaceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="b84e1-505">bInterfaceClass 필드가 0xFF로 설정되지 않은 경우 모든 값은 USB에서 할당하도록 예약됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-505">If the bInterfaceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="b84e1-506">7</span><span class="sxs-lookup"><span data-stu-id="b84e1-506">7</span></span>      | <span data-ttu-id="b84e1-507">bInterfaceProtocol</span><span class="sxs-lookup"><span data-stu-id="b84e1-507">bInterfaceProtocol</span></span> | <span data-ttu-id="b84e1-508">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-508">1</span></span>    | <span data-ttu-id="b84e1-509">프로토콜</span><span class="sxs-lookup"><span data-stu-id="b84e1-509">Protocol</span></span>  | <span data-ttu-id="b84e1-510">프로토콜 코드(USB에서 할당)</span><span class="sxs-lookup"><span data-stu-id="b84e1-510">Protocol code (assigned by USB).</span></span> <span data-ttu-id="b84e1-511">이러한 코드는 bInterfaceClass 및 bInterfaceSubClass 필드의 값으로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-511">These codes are qualified by the value of the bInterfaceClass and the bInterfaceSubClass fields.</span></span> <span data-ttu-id="b84e1-512">인터페이스에서 클래스 관련 요청을 지원하는 경우 이 코드는 디바이스에서 디바이스 클래스 사양에 정의된 대로 사용하는 프로토콜을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-512">If an interface supports class-specific requests, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span><br /><span data-ttu-id="b84e1-513">이 필드를 0으로 초기화하면 디바이스가 이 인터페이스의 클래스 관련 프로토콜을 사용하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-513">If this field is reset to 0, the device does not use a class specific protocol on this interface.</span></span> <span data-ttu-id="b84e1-514">이 필드를 0xFF로 설정하면 디바이스가 이 인터페이스의 공급업체 프로토콜을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-514">If this field is set to 0xFF, the device uses a vendor specific protocol for this interface.</span></span> |
| <span data-ttu-id="b84e1-515">8</span><span class="sxs-lookup"><span data-stu-id="b84e1-515">8</span></span>      | <span data-ttu-id="b84e1-516">iInterface</span><span class="sxs-lookup"><span data-stu-id="b84e1-516">iInterface</span></span>         | <span data-ttu-id="b84e1-517">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-517">1</span></span>    | <span data-ttu-id="b84e1-518">인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-518">Index</span></span>     | <span data-ttu-id="b84e1-519">이 인터페이스를 설명하는 문자열 설명자 인덱스</span><span class="sxs-lookup"><span data-stu-id="b84e1-519">Index of string descriptor describing this interface.</span></span> |

<span data-ttu-id="b84e1-520">USBX는 다음과 같이 USB 인터페이스 설명자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-520">USBX defines a USB interface descriptor as follows.</span></span>

```c
typedef struct UX_INTERFACE_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bInterfaceNumber;
    UINT bAlternateSetting;
    UINT bNumEndpoints;
    UINT bInterfaceClass
    UINT bInterfaceSubClass;
    UINT bInterfaceProtocol;
    UINT iInterface;
} UX_INTERFACE_DESCRIPTOR;
```

<span data-ttu-id="b84e1-521">USB 인터페이스 설명자는 다음 설명과 같이 인터페이스 컨테이너의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-521">The USB interface descriptor is part of an interface container described as follows.</span></span>

```c
typedef struct UX_INTERFACE_STRUCT
{
    ULONG ux_interface_handle;
    ULONG ux_interface_state;
    ULONG ux_interface_current_alternate_setting;
    struct UX_INTERFACE_DESCRIPTOR_STRUCT ux_interface_descriptor;
    struct UX_HOST_CLASS_STRUCT    *ux_interface_class;
    VOID    *ux_interface_class_instance;
    struct UX_ENDPOINT_STRUCT    *ux_interface_first_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_interface_next_interface;
    struct UX_CONFIGURATION_STRUCT    *ux_interface_configuration;
} UX_INTERFACE;
```

- <span data-ttu-id="b84e1-522">**ux_interface_handle**: 인터페이스의 핸들.</span><span class="sxs-lookup"><span data-stu-id="b84e1-522">**ux_interface_handle**: Handle of the interface.</span></span> <span data-ttu-id="b84e1-523">일반적으로 인터페이스에 대한 이 구조의 인스턴스 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-523">This is typically the address of the instance of this structure for the interface.</span></span>
- <span data-ttu-id="b84e1-524">**ux_interface_state**: 인터페이스의 상태</span><span class="sxs-lookup"><span data-stu-id="b84e1-524">**ux_interface_state**: State of the interface.</span></span>
- <span data-ttu-id="b84e1-525">**ux_interface_descriptor**: USB 인터페이스 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-525">**ux_interface_descriptor**: USB interface descriptor.</span></span>
- <span data-ttu-id="b84e1-526">**ux_interface_class**: 이 인터페이스를 소유한 클래스 형식에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-526">**ux_interface_class**: Pointer to the class type that owns this interface.</span></span>
- <span data-ttu-id="b84e1-527">**ux_interface_class_instance**: 이 인터페이스를 소유한 클래스의 인스턴스에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-527">**ux_interface_class_instance**: Pointer to the instance of the class that owns this interface.</span></span>
- <span data-ttu-id="b84e1-528">**ux_interface_first_endpoint**: 이 인터페이스에 등록된 첫 번째 엔드포인트에 대한 포인터입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-528">**ux_interface_first_endpoint**: Pointer to the first endpoint registered with this interface.</span></span>
- <span data-ttu-id="b84e1-529">**ux_interface_next_interface**: 구성과 연결된 다음 인터페이스에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-529">**ux_interface_next_interface**: Pointer to the next interface associated with the configuration.</span></span>
- <span data-ttu-id="b84e1-530">**ux_interface_configuration**: 이 인터페이스의 구성 소유자에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-530">**ux_interface_configuration**: Pointer to the configuration owner of this interface.</span></span>

### <a name="endpoint-descriptors"></a><span data-ttu-id="b84e1-531">엔드포인트 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-531">Endpoint Descriptors</span></span>

<span data-ttu-id="b84e1-532">인터페이스와 연결된 엔드포인트마다 고유한 엔드포인트 설명자가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-532">Each endpoint associated with an interface has its own endpoint descriptor.</span></span> <span data-ttu-id="b84e1-533">이 설명자에는 호스트 스택에서 각 엔드포인트의 대역폭 요구 사항, 엔드포인트와 연결된 최대 페이로드, 주기 및 방향을 결정하기 위해 필요한 정보가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-533">This descriptor contains the information required by the host stack to determine the bandwidth requirements of each endpoint, the maximum payload associated with the endpoint, its periodicity, and its direction.</span></span> <span data-ttu-id="b84e1-534">엔드포인트 설명자는 항상 구성에 대한 GET_DESCRIPTOR 명령을 통해 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-534">An endpoint descriptor is always returned by a GET_DESCRIPTOR command for the configuration.</span></span>

<span data-ttu-id="b84e1-535">디바이스 설명자와 연결된 기본 제어 엔드포인트는 인터페이스와 연결된 엔드포인트로 계산되지 않으므로 이 설명자에 반환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-535">The default control endpoint associated with the device descriptor is not counted as part of the endpoint(s) associated with the interface and therefore not returned in this descriptor.</span></span>

<span data-ttu-id="b84e1-536">호스트 소프트웨어에서 인터페이스의 대체 설정 변경을 요청하면 연결된 모든 엔드포인트와 해당 USB 리소스는 새로운 대체 설정에 따라 수정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-536">When the host software requests a change of the alternate setting for an interface, all the associated endpoints and their USB resources are modified according to the new alternate setting.</span></span>

<span data-ttu-id="b84e1-537">기본 제어 엔드포인트를 제외하고 인터페이스 간에 엔드포인트를 공유할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-537">Except for the default control endpoints, endpoints cannot be share between interfaces.</span></span>

| <span data-ttu-id="b84e1-538">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-538">Offset</span></span> | <span data-ttu-id="b84e1-539">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-539">Field</span></span>            | <span data-ttu-id="b84e1-540">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-540">Size</span></span> | <span data-ttu-id="b84e1-541">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-541">Value</span></span>    | <span data-ttu-id="b84e1-542">Description</span><span class="sxs-lookup"><span data-stu-id="b84e1-542">Description</span></span>                       |
| ------ | ---------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="b84e1-543">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-543">0</span></span>      | <span data-ttu-id="b84e1-544">bLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-544">bLength</span></span>          | <span data-ttu-id="b84e1-545">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-545">1</span></span>    | <span data-ttu-id="b84e1-546">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-546">Number</span></span>   | <span data-ttu-id="b84e1-547">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-547">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="b84e1-548">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-548">1</span></span>      | <span data-ttu-id="b84e1-549">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-549">bDescriptorType</span></span>  | <span data-ttu-id="b84e1-550">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-550">1</span></span>    | <span data-ttu-id="b84e1-551">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-551">Constant</span></span> | <span data-ttu-id="b84e1-552">엔드포인트 설명자 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-552">ENDPOINT Descriptor Type.</span></span> |
| <span data-ttu-id="b84e1-553">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-553">2</span></span>      | <span data-ttu-id="b84e1-554">bEndpointAddress</span><span class="sxs-lookup"><span data-stu-id="b84e1-554">bEndpointAddress</span></span> | <span data-ttu-id="b84e1-555">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-555">1</span></span>    | <span data-ttu-id="b84e1-556">엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-556">Endpoint</span></span> | <span data-ttu-id="b84e1-557">이 설명자가 설명하는 USB 디바이스의 엔드포인트 주소.</span><span class="sxs-lookup"><span data-stu-id="b84e1-557">The address of the endpoint on the USB device described by this descriptor.</span></span> <span data-ttu-id="b84e1-558">주소는 다음과 같이 인코딩됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-558">The address is encoded as follows:</span></span><br /><span data-ttu-id="b84e1-559">Bit 3...0: 엔드포인트 번호</span><span class="sxs-lookup"><span data-stu-id="b84e1-559">Bit 3...0: The endpoint number</span></span><br /><span data-ttu-id="b84e1-560">Bit 6...4: 예약됨, 0으로 초기화</span><span class="sxs-lookup"><span data-stu-id="b84e1-560">Bit 6...4: Reserved, reset to zero</span></span><br /><span data-ttu-id="b84e1-561">Bit 7: 방향, 제어 엔드포인트에서 무시됨</span><span class="sxs-lookup"><span data-stu-id="b84e1-561">Bit 7: Direction, ignored for control endpoints</span></span><br /><span data-ttu-id="b84e1-562">0 = 출력 엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-562">0 = OUT endpoint</span></span><br /><span data-ttu-id="b84e1-563">1 = 입력 엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-563">1 = IN endpoint</span></span> |
| <span data-ttu-id="b84e1-564">3</span><span class="sxs-lookup"><span data-stu-id="b84e1-564">3</span></span>      | <span data-ttu-id="b84e1-565">bmAttributes</span><span class="sxs-lookup"><span data-stu-id="b84e1-565">bmAttributes</span></span>     | <span data-ttu-id="b84e1-566">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-566">1</span></span>    | <span data-ttu-id="b84e1-567">Bitmap</span><span class="sxs-lookup"><span data-stu-id="b84e1-567">Bitmap</span></span>   | <span data-ttu-id="b84e1-568">이 필드는 **bConfigurationValue** 필드를 사용하여 구성되는 엔드포인트의 특성을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-568">This field describes the endpoint's attributes when it is configured using the **bConfigurationValue** field.</span></span> <span data-ttu-id="b84e1-569">비트 1..0: 전송 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-569">Bits 1..0: Transfer Type</span></span><br /><span data-ttu-id="b84e1-570">00 = 컨트롤</span><span class="sxs-lookup"><span data-stu-id="b84e1-570">00 = Control</span></span><br /><span data-ttu-id="b84e1-571">01 = 등시</span><span class="sxs-lookup"><span data-stu-id="b84e1-571">01 = Isochronous</span></span><br /><span data-ttu-id="b84e1-572">10 = 대량</span><span class="sxs-lookup"><span data-stu-id="b84e1-572">10 = Bulk</span></span><br /><span data-ttu-id="b84e1-573">11 = 인터럽트</span><span class="sxs-lookup"><span data-stu-id="b84e1-573">11 = Interrupt</span></span><br /><span data-ttu-id="b84e1-574">등시 엔드포인트가 아닌 경우 비트 5..2는 예약되어 있으므로 0으로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-574">If not an isochronous endpoint, bits 5..2 are reserved and must be set to zero.</span></span> <span data-ttu-id="b84e1-575">등시인 경우 다음과 같이 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-575">If isochronous, they are defined as follows:</span></span><br /><span data-ttu-id="b84e1-576">비트 3..2: 동기화 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-576">Bits 3..2: Synchronization Type</span></span><br /><span data-ttu-id="b84e1-577">00 = 동기화 없음</span><span class="sxs-lookup"><span data-stu-id="b84e1-577">00 = No Synchronization</span></span><br /><span data-ttu-id="b84e1-578">01 = 비동기</span><span class="sxs-lookup"><span data-stu-id="b84e1-578">01 = Asynchronous</span></span><br /><span data-ttu-id="b84e1-579">10 = 적응형</span><span class="sxs-lookup"><span data-stu-id="b84e1-579">10 = Adaptive</span></span><br /><span data-ttu-id="b84e1-580">11 = 동기</span><span class="sxs-lookup"><span data-stu-id="b84e1-580">11 = Synchronous</span></span><br /><span data-ttu-id="b84e1-581">비트 5..4: 사용 유형</span><span class="sxs-lookup"><span data-stu-id="b84e1-581">Bits 5..4: Usage Type</span></span><br /><span data-ttu-id="b84e1-582">00 = 데이터 엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-582">00 = Data endpoint</span></span><br /><span data-ttu-id="b84e1-583">01 = 피드백 엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-583">01 = Feedback endpoint</span></span><br /><span data-ttu-id="b84e1-584">10 = 암시적 피드백 데이터 엔드포인트</span><span class="sxs-lookup"><span data-stu-id="b84e1-584">10 = Implicit feedback data endpoint</span></span><br /><span data-ttu-id="b84e1-585">11 = 예약됨</span><span class="sxs-lookup"><span data-stu-id="b84e1-585">11 = Reserved</span></span> |
| <span data-ttu-id="b84e1-586">4</span><span class="sxs-lookup"><span data-stu-id="b84e1-586">4</span></span>      | <span data-ttu-id="b84e1-587">wMaxPacketSize</span><span class="sxs-lookup"><span data-stu-id="b84e1-587">wMaxPacketSize</span></span>   | <span data-ttu-id="b84e1-588">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-588">2</span></span>    | <span data-ttu-id="b84e1-589">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-589">Number</span></span>   | <span data-ttu-id="b84e1-590">이 구성을 선택하면 이 엔드포인트에서 보내거나 받을 수 있는 최대 패킷 크기.</span><span class="sxs-lookup"><span data-stu-id="b84e1-590">Maximum packet size this endpoint is capable of sending or receiving when this configuration is selected.</span></span><br /><span data-ttu-id="b84e1-591">등시 엔드포인트의 경우 이 값은 일정에서 버스 시간을 예약하는 데 사용되며 (마이크로)프레임 데이터 페이로드에 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-591">For isochronous endpoints, this value is used to reserve the bus time in the schedule, required for the per-(micro)frame data payloads.</span></span> <span data-ttu-id="b84e1-592">파이프에서 사용하는 대역폭이 예약된 대역폭보다 지속적으로 작을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-592">The pipe may, on an ongoing basis, actually use less bandwidth than that reserved.</span></span> <span data-ttu-id="b84e1-593">디바이스는 필요에 따라 일반적인 비-USB 정의 메커니즘을 통해 사용되는 실제 대역폭을 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-593">The device reports, if necessary, the actual bandwidth used via its normal, non-USB defined mechanisms.</span></span><br /><span data-ttu-id="b84e1-594">모든 엔드포인트에서 비트 10..0은 최대 패킷 크기(바이트)를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-594">For all endpoints, bits 10..0 specify the maximum packet size (in bytes).</span></span><br /><span data-ttu-id="b84e1-595">고속 등시 및 인터럽트 엔드포인트 경우:</span><span class="sxs-lookup"><span data-stu-id="b84e1-595">For high-speed isochronous and interrupt endpoints:</span></span><br /><span data-ttu-id="b84e1-596">비트 12..11은 마이크로프레임당 추가 트랜잭션 기회 수를 다음과 같이 지정합니다. 00 = 없음(마이크로프레임당 트랜잭션 1개)</span><span class="sxs-lookup"><span data-stu-id="b84e1-596">Bits 12..11 specify the number of additional transaction opportunities per microframe: 00 = None (1 transaction per microframe)</span></span><br /><span data-ttu-id="b84e1-597">01 = 1개 추가(마이크로프레임당 2개)</span><span class="sxs-lookup"><span data-stu-id="b84e1-597">01 = 1 additional (2 per microframe)</span></span><br /><span data-ttu-id="b84e1-598">10 = 2개 추가(마이크로프레임당 3개)</span><span class="sxs-lookup"><span data-stu-id="b84e1-598">10 = 2 additional (3 per microframe)</span></span><br /><span data-ttu-id="b84e1-599">11 = 예약됨</span><span class="sxs-lookup"><span data-stu-id="b84e1-599">11 = Reserved</span></span><br /><span data-ttu-id="b84e1-600">비트 15..13은 예약되어 있으며 0으로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-600">Bits 15..13 are reserved and must be set to zero.</span></span> |
| <span data-ttu-id="b84e1-601">6</span><span class="sxs-lookup"><span data-stu-id="b84e1-601">6</span></span>      | <span data-ttu-id="b84e1-602">bInterval</span><span class="sxs-lookup"><span data-stu-id="b84e1-602">bInterval</span></span>        | <span data-ttu-id="b84e1-603">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-603">1</span></span>     | <span data-ttu-id="b84e1-604">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-604">Number</span></span>   | <span data-ttu-id="b84e1-605">데이터 전송에 대한 폴링 엔드포인트의 숫자 간격입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-605">Number interval for polling endpoint for data transfers.</span></span><br /><span data-ttu-id="b84e1-606">디바이스 작동 속도에 따라 프레임 또는 마이크로프레임으로 표현합니다(예: 1밀리초 또는 125μs 단위).</span><span class="sxs-lookup"><span data-stu-id="b84e1-606">Expressed in frames or microframes depending on the device operating speed (i.e., either 1 millisecond or 125 µs units).</span></span><br /><span data-ttu-id="b84e1-607">전체/고속 등시 엔드포인트의 경우 이 값은 1 ~ 16 사이여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-607">For full-/high-speed isochronous endpoints, this value must be in the range from 1 to 16.</span></span> <span data-ttu-id="b84e1-608">**bInterval** 은 2bInterval-1 값의 지수로 사용됩니다. 예를 들어 **bInterval** 4는 8(24-1)이라는 기간을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-608">The **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span><br /><span data-ttu-id="b84e1-609">전체/저속 인터럽트 엔드포인트의 경우 이 필드의 값은 1 ~ 255입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-609">For full-/low-speed interrupt endpoints, the value of this field may be from 1 to 255.</span></span><br /><span data-ttu-id="b84e1-610">고속 인터럽트 엔드포인트의 경우 **bInterval** 은 2bInterval-1 값의 지수로 사용됩니다. 예를 들어 **bInterval** 4는 8(24-1)이라는 기간을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-610">For high-speed interrupt endpoints, the **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span> <span data-ttu-id="b84e1-611">이 값은 1 ~ 16이여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-611">This value must be from 1 to 16.</span></span><br /><span data-ttu-id="b84e1-612">고속 대량/제어 출력 엔드포인트의 경우 **bInterval** 은 엔드포인트의 최대 NAK 속도를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-612">For high-speed bulk/control OUT endpoints, the **bInterval** specify the maximum NAK rate of the endpoint.</span></span> <span data-ttu-id="b84e1-613">값 0은 엔드포인트가 NAK를 수행하지 않는다는 뜻입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-613">A value of 0 indicates the endpoint never NAKs.</span></span> <span data-ttu-id="b84e1-614">다른 값은 마이크로프레임의 **bInterval** 마다 최대 1개의 NAK가 있다는 뜻입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-614">Other values indicate at most one NAK each **bInterval** of microframes.</span></span><br /><span data-ttu-id="b84e1-615">이 값은 0 ~ 255여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-615">This value must be in the range from 0 to 255.</span></span> |

<span data-ttu-id="b84e1-616">USBX는 다음과 같이 USB 엔드포인트 설명자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-616">USBX defines a USB endpoint descriptor as follows:</span></span>

```c
typedef struct UX_ENDPOINT_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bEndpointAddress;
    UINT bmAttributes;
    USHORT wMaxPacketSize;
    UINT bInterval;
} UX_ENDPOINT_DESCRIPTOR;
```

<span data-ttu-id="b84e1-617">USB 엔드포인트 설명자는 다음 설명과 같이 엔드포인트 컨테이너의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-617">The USB endpoint descriptor is part of an endpoint container, which is described as follows.</span></span>

```c
typedef struct UX_ENDPOINT_STRUCT {
    ULONG    ux_endpoint_handle;
    ULONG    ux_endpoint_state;
    VOID    *ux_endpoint_ed;
    struct UX_ENDPOINT_DESCRIPTOR_STRUCT    ux_endpoint_descriptor;
    struct UX_ENDPOINT_STRUCT    *ux_endpoint_next_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_endpoint_interface;
    struct UX_DEVICE_STRUCT    *ux_endpoint_device;
    struct UX_TRANSFER REQUEST_STRUCT    ux_endpoint_transfer request;
} UX_ENDPOINT;

```

- <span data-ttu-id="b84e1-618">**ux_endpoint_handle**: 엔드포인트의 핸들.</span><span class="sxs-lookup"><span data-stu-id="b84e1-618">**ux_endpoint_handle**: Handle of the endpoint.</span></span> <span data-ttu-id="b84e1-619">일반적으로 엔드포인트에 대한 이 구조의 인스턴스 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-619">This is typically the address of the instance of this structure for the endpoint.</span></span>
- <span data-ttu-id="b84e1-620">**ux_endpoint_state**: 엔드포인트의 상태</span><span class="sxs-lookup"><span data-stu-id="b84e1-620">**ux_endpoint_state**: State of the endpoint.</span></span>
- <span data-ttu-id="b84e1-621">**ux_endpoint_ed**: 호스트 컨트롤러 계층의 실제 엔드포인트에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-621">**ux_endpoint_ed**: Pointer to the physical endpoint at the host controller layer.</span></span>
- <span data-ttu-id="b84e1-622">**ux_endpoint_descriptor**: USB 엔드포인트 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-622">**ux_endpoint_descriptor**: USB endpoint descriptor.</span></span>
- <span data-ttu-id="b84e1-623">**ux_endpoint_next_endpoint**: 동일한 인터페이스에 속하는 다음 엔드포인트에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-623">**ux_endpoint_next_endpoint**: Pointer to the next endpoint that belongs to the same interface.</span></span>
- <span data-ttu-id="b84e1-624">**ux_endpoint_interface**: 이 엔드포인트 인터페이스를 소유한 인터페이스에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-624">**ux_endpoint_interface**: Pointer to the interface that owns this endpoint interface.</span></span>
- <span data-ttu-id="b84e1-625">**ux_endpoint_device**: 부모 디바이스 컨테이너에 대한 포인터</span><span class="sxs-lookup"><span data-stu-id="b84e1-625">**ux_endpoint_device**: Pointer to the parent device container.</span></span>
- <span data-ttu-id="b84e1-626">**ux_endpoint_transfer 요청**: 디바이스와 데이터를 주고 받는 데 사용되는 USB 전송 요청</span><span class="sxs-lookup"><span data-stu-id="b84e1-626">**ux_endpoint_transfer request**: USB transfer request used to send/receive data from to/from the device.</span></span>

### <a name="string-descriptors"></a><span data-ttu-id="b84e1-627">문자열 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-627">String descriptors</span></span>

<span data-ttu-id="b84e1-628">문자열 설명자는 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-628">String descriptors are optional.</span></span> <span data-ttu-id="b84e1-629">디바이스에서 문자열 설명자를 지원하지 않는 경우 디바이스, 구성 및 인터페이스 설명자 내의 문자열 설명자에 대한 모든 참조를 0으로 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-629">If a device does not support string descriptors, all references to string descriptors within device, configuration, and interface descriptors must be reset to zero.</span></span>

<span data-ttu-id="b84e1-630">문자열 설명자는 유니코드 인코딩을 사용하므로 여러 문자 세트를 지원할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-630">String descriptors use UNICODE encoding, thus allowing the support for several character sets.</span></span> <span data-ttu-id="b84e1-631">USB 디바이스의 문자열은 여러 언어를 지원할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-631">The strings in a USB device may support multiple languages.</span></span> <span data-ttu-id="b84e1-632">문자열 설명자를 요청할 때 요청자는 USB-IF에 정의된 언어 ID를 사용하여 원하는 언어를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-632">When requesting a string descriptor, the requester specifies the desired language using a language ID defined by the USB-IF.</span></span> <span data-ttu-id="b84e1-633">현재 정의된 USB LANGID 목록은 USBX 부록에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-633">The list of currently defined USB LANGIDs can be found in the USBX appendix ??.</span></span>
<span data-ttu-id="b84e1-634">모든 언어의 문자열 인덱스 0은 디바이스에서 지원하는 2바이트 LANGID 코드 배열이 포함된 문자열 설명자를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-634">String index zero for all languages returns a string descriptor that contains an array of two-byte LANGID codes supported by the device.</span></span> <span data-ttu-id="b84e1-635">유니코드 문자열은 0으로 종료되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-635">It should be noted that the UNICODE string is not 0 terminated.</span></span> <span data-ttu-id="b84e1-636">대신 설명자의 첫 번째 바이트에 포함된 배열의 크기에서 2를 빼서 문자열 배열의 크기를 계산합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-636">Instead, the size of the string array is computed by subtracting two from the size of the array contained in the first byte of the descriptor.</span></span>

<span data-ttu-id="b84e1-637">USB 문자열 설명자 0은 다음과 같이 인코딩됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-637">The USB string descriptor 0 is encoded as follows.</span></span>

| <span data-ttu-id="b84e1-638">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-638">Offset</span></span> | <span data-ttu-id="b84e1-639">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-639">Field</span></span>           | <span data-ttu-id="b84e1-640">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-640">Size</span></span> | <span data-ttu-id="b84e1-641">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-641">Value</span></span>    | <span data-ttu-id="b84e1-642">Description</span><span class="sxs-lookup"><span data-stu-id="b84e1-642">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="b84e1-643">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-643">0</span></span>      | <span data-ttu-id="b84e1-644">bLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-644">bLength</span></span>         | <span data-ttu-id="b84e1-645">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-645">1</span></span>    | <span data-ttu-id="b84e1-646">N+2</span><span class="sxs-lookup"><span data-stu-id="b84e1-646">N+2</span></span>      | <span data-ttu-id="b84e1-647">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-647">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="b84e1-648">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-648">1</span></span>      | <span data-ttu-id="b84e1-649">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-649">bDescriptorType</span></span> | <span data-ttu-id="b84e1-650">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-650">1</span></span>    | <span data-ttu-id="b84e1-651">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-651">Constant</span></span> | <span data-ttu-id="b84e1-652">문자열 설명자 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-652">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="b84e1-653">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-653">2</span></span>      | <span data-ttu-id="b84e1-654">wLANGID[0]</span><span class="sxs-lookup"><span data-stu-id="b84e1-654">wLANGID[0]</span></span>      | <span data-ttu-id="b84e1-655">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-655">2</span></span>    | <span data-ttu-id="b84e1-656">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-656">Number</span></span>   | <span data-ttu-id="b84e1-657">LANGID 코드 0</span><span class="sxs-lookup"><span data-stu-id="b84e1-657">LANGID code 0</span></span>                    |
| <span data-ttu-id="b84e1-658">...</span><span class="sxs-lookup"><span data-stu-id="b84e1-658">...</span></span>    | <span data-ttu-id="b84e1-659">...]</span><span class="sxs-lookup"><span data-stu-id="b84e1-659">...]</span></span>            | <span data-ttu-id="b84e1-660">...</span><span class="sxs-lookup"><span data-stu-id="b84e1-660">...</span></span>  | <span data-ttu-id="b84e1-661">...</span><span class="sxs-lookup"><span data-stu-id="b84e1-661">...</span></span>      | <span data-ttu-id="b84e1-662">...</span><span class="sxs-lookup"><span data-stu-id="b84e1-662">...</span></span>                              |
| <span data-ttu-id="b84e1-663">N</span><span class="sxs-lookup"><span data-stu-id="b84e1-663">N</span></span>      | <span data-ttu-id="b84e1-664">wLANGID[n]</span><span class="sxs-lookup"><span data-stu-id="b84e1-664">wLANGID[n]</span></span>      | <span data-ttu-id="b84e1-665">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-665">2</span></span>    | <span data-ttu-id="b84e1-666">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-666">Number</span></span>   | <span data-ttu-id="b84e1-667">LANGID 코드 n</span><span class="sxs-lookup"><span data-stu-id="b84e1-667">LANGID code n</span></span>                    |

<span data-ttu-id="b84e1-668">다른 USB 문자열 설명자는 다음과 같이 인코딩됩니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-668">Other USB string descriptors are encoded as follows.</span></span>

| <span data-ttu-id="b84e1-669">Offset</span><span class="sxs-lookup"><span data-stu-id="b84e1-669">Offset</span></span> | <span data-ttu-id="b84e1-670">필드</span><span class="sxs-lookup"><span data-stu-id="b84e1-670">Field</span></span>           | <span data-ttu-id="b84e1-671">Size</span><span class="sxs-lookup"><span data-stu-id="b84e1-671">Size</span></span> | <span data-ttu-id="b84e1-672">값</span><span class="sxs-lookup"><span data-stu-id="b84e1-672">Value</span></span>    | <span data-ttu-id="b84e1-673">Description</span><span class="sxs-lookup"><span data-stu-id="b84e1-673">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="b84e1-674">0</span><span class="sxs-lookup"><span data-stu-id="b84e1-674">0</span></span>      | <span data-ttu-id="b84e1-675">bLength</span><span class="sxs-lookup"><span data-stu-id="b84e1-675">bLength</span></span>         | <span data-ttu-id="b84e1-676">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-676">1</span></span>    | <span data-ttu-id="b84e1-677">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-677">Number</span></span>   | <span data-ttu-id="b84e1-678">이 설명자의 크기(바이트)</span><span class="sxs-lookup"><span data-stu-id="b84e1-678">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="b84e1-679">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-679">1</span></span>      | <span data-ttu-id="b84e1-680">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="b84e1-680">bDescriptorType</span></span> | <span data-ttu-id="b84e1-681">1</span><span class="sxs-lookup"><span data-stu-id="b84e1-681">1</span></span>    | <span data-ttu-id="b84e1-682">상수</span><span class="sxs-lookup"><span data-stu-id="b84e1-682">Constant</span></span> | <span data-ttu-id="b84e1-683">문자열 설명자 형식</span><span class="sxs-lookup"><span data-stu-id="b84e1-683">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="b84e1-684">2</span><span class="sxs-lookup"><span data-stu-id="b84e1-684">2</span></span>      | <span data-ttu-id="b84e1-685">bString</span><span class="sxs-lookup"><span data-stu-id="b84e1-685">bString</span></span>         | <span data-ttu-id="b84e1-686">n</span><span class="sxs-lookup"><span data-stu-id="b84e1-686">n</span></span>    | <span data-ttu-id="b84e1-687">숫자</span><span class="sxs-lookup"><span data-stu-id="b84e1-687">Number</span></span>   | <span data-ttu-id="b84e1-688">유니코드로 인코딩된 문자열</span><span class="sxs-lookup"><span data-stu-id="b84e1-688">UNICODE encoded string</span></span>           |

<span data-ttu-id="b84e1-689">USBX는 다음과 같이 길이가 0이 아닌 USB 문자열 설명자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-689">USBX defines a non-zero length USB string descriptor as follows:</span></span>

```c
typedef struct UX_STRING_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT bString[1];
} UX_STRING_DESCRIPTOR;
```

### <a name="functional-descriptors"></a><span data-ttu-id="b84e1-690">함수 설명자</span><span class="sxs-lookup"><span data-stu-id="b84e1-690">Functional Descriptors</span></span>

<span data-ttu-id="b84e1-691">함수 설명자는 클래스 관련 설명자라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-691">Functional descriptors are also known as class-specific descriptors.</span></span> <span data-ttu-id="b84e1-692">일반적으로 제네릭 설명자와 동일한 기본 구조를 사용하며 클래스에 추가 정보를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-692">They normally use the same basic structures as generic descriptors and allow for additional information to be available to the class.</span></span> <span data-ttu-id="b84e1-693">예를 들어 USB 오디오 스피커의 경우 클래스 관련 설명자를 사용하면 오디오 클래스는 각 대체 설정에서 지원되는 오디오 빈도 유형을 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-693">For example, in the case of the USB audio speaker, class specific descriptors allow the audio class to retrieve for each alternate setting the type of audio frequency supported.</span></span>

### <a name="usbx-device-descriptor-framework-in-memory"></a><span data-ttu-id="b84e1-694">메모리의 USBX 디바이스 설명자 프레임워크</span><span class="sxs-lookup"><span data-stu-id="b84e1-694">USBX Device Descriptor Framework in Memory</span></span>

<span data-ttu-id="b84e1-695">USBX는 대부분의 디바이스 설명자, 즉, 문자열 및 함수 설명자를 제외한 모든 설명자를 메모리에 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-695">USBX maintains most device descriptors in memory, that is, all descriptors except the string and functional descriptors.</span></span> <span data-ttu-id="b84e1-696">다음 다이어그램에서는 이러한 설명자를 저장하고 관련 짓는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="b84e1-696">The following diagram shows how these descriptors are stored and related.</span></span>

![메모리의 USBX 디바이스 설명자 프레임워크](./media/usbx-host-stack/usbx-device-descriptor-framework.png)
