---
title: 1장 - Azure RTOS NetX DHCP 서버 소개
description: 애플리케이션은 Azure RTOS NetX DHCP 서버와 통신을 설정하여 동적으로 IP 주소를 요청하고 가져옵니다.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 17438a20ad3da64c88c3d6bb19a4887c2c6e354e
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104811610"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-dhcp-server"></a><span data-ttu-id="60f1c-103">1장 - Azure RTOS NetX DHCP 서버 소개</span><span class="sxs-lookup"><span data-stu-id="60f1c-103">Chapter 1 - Introduction to Azure RTOS NetX DHCP Server</span></span>

<span data-ttu-id="60f1c-104">NetX에서 애플리케이션의 IP 주소는 *nx_ip_create* 서비스 호출에 제공된 매개 변수 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-104">In NetX, the application's IP address is one of the supplied parameters to the *nx_ip_create* service call.</span></span> <span data-ttu-id="60f1c-105">IP 주소가 정적으로 또는 사용자 구성을 통해 애플리케이션에 알려진 경우 IP 주소를 제공해도 문제가 발생하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-105">Supplying the IP address poses no problem if the IP address is known to the application, either statically or through user configuration.</span></span> <span data-ttu-id="60f1c-106">그러나 애플리케이션이 해당 IP 주소를 인식하지 못하거나 담당하지 않는 경우가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-106">However, there are some instances where the application doesn't know or care what its IP address is.</span></span> <span data-ttu-id="60f1c-107">이러한 경우 *nx_ip_create* 함수에 제로 IP 주소를 제공해야 하며, 애플리케이션은 해당 Azure RTOS NetX DHCP 서버와 통신을 설정하여 IP 주소를 동적으로 요청하여 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-107">In such situations, a zero IP address should be supplied to the *nx_ip_create* function and the application establishes communication with its Azure RTOS NetX DHCP server to dynamically request and obtain an IP address.</span></span>

## <a name="dynamic-ip-address-assignment"></a><span data-ttu-id="60f1c-108">동적 IP 주소 할당</span><span class="sxs-lookup"><span data-stu-id="60f1c-108">Dynamic IP Address Assignment</span></span>

<span data-ttu-id="60f1c-109">네트워크에서 동적 IP 주소를 가져오는 데 사용되는 기본 서비스는 RARP(역방향 주소 확인 프로토콜)입니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-109">The basic service used to obtain a dynamic IP address from the network is the Reverse Address Resolution Protocol (RARP).</span></span> <span data-ttu-id="60f1c-110">이 프로토콜은 다른 네트워크 노드의 MAC 주소를 찾는 대신 자체 IP 주소를 가져오도록 설계되었다는 점을 제외하면, ARP와 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-110">This protocol is similar to ARP, except it is designed to obtain an IP address for itself instead of finding the MAC address for another network node.</span></span> <span data-ttu-id="60f1c-111">하위 수준 RARP 메시지는 로컬 네트워크에서 브로드캐스트되며 동적으로 할당된 IP 주소를 포함하는 RARP 응답으로 응답하는 것은 네트워크 상의 서버가 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-111">The low-level RARP message is broadcast on the local network and it is the responsibility of a server on the network to respond with an RARP response, which contains a dynamically allocated IP address.</span></span>

<span data-ttu-id="60f1c-112">RARP는 IP 주소를 동적으로 할당하는 서비스를 제공하지만, 몇 가지 단점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-112">Although RARP provides a service for dynamic allocation of IP addresses, it has several shortcomings.</span></span> <span data-ttu-id="60f1c-113">가장 두드러진 결점은 RARP가 IP 주소의 동적 할당만 제공한다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-113">The most glaring deficiency is that RARP only provides dynamic allocation of the IP address.</span></span> <span data-ttu-id="60f1c-114">대부분의 경우 디바이스가 네트워크에 제대로 참여하려면 추가 정보가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-114">In most situations, more information is necessary in order for a device to properly participate on a network.</span></span> <span data-ttu-id="60f1c-115">대부분의 디바이스에는 IP 주소 외에도 네트워크 마스크와 게이트웨이 IP 주소가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-115">In addition to an IP address, most devices need the network mask and the gateway IP address.</span></span> <span data-ttu-id="60f1c-116">DNS 서버의 IP 주소 및 기타 네트워크 정보도 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-116">The IP address of a DNS server and other network information may also be needed.</span></span> <span data-ttu-id="60f1c-117">RARP에는 이 정보를 제공하는 기능이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-117">RARP does not have the ability to provide this information.</span></span>

## <a name="rarp-alternatives"></a><span data-ttu-id="60f1c-118">RARP 대안</span><span class="sxs-lookup"><span data-stu-id="60f1c-118">RARP Alternatives</span></span>

<span data-ttu-id="60f1c-119">연구원들은 RARP의 결함을 극복하기 위해 BOOTP(부트스트랩 프로토콜)라고 하는 더 포괄적인 IP 주소 할당 메커니즘을 개발했습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-119">In order to overcome the deficiencies of RARP, researchers developed a more comprehensive IP address allocation mechanism called the Bootstrap Protocol (BOOTP).</span></span> <span data-ttu-id="60f1c-120">이 프로토콜에는 IP 주소를 동적으로 할당하고 중요한 추가 네트워크 정보도 제공하는 기능이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-120">This protocol has the ability to dynamically allocate an IP address and also provide additional important network information.</span></span> <span data-ttu-id="60f1c-121">그러나 BOOTP는 정적 네트워크 구성을 위해 설계된다는 단점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-121">However, BOOTP has the drawback of being designed for static network configurations.</span></span> <span data-ttu-id="60f1c-122">빠른 주소 할당 또는 자동 주소 할당을 허용하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-122">It does not allow for quick or automated address assignment.</span></span>

<span data-ttu-id="60f1c-123">여기서 DHCP(Dynamic Host Configuration Protocol)가 매우 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-123">This is where the Dynamic Host Configuration Protocol (DHCP) is extremely useful.</span></span> <span data-ttu-id="60f1c-124">DHCP는 지정된 기간 동안 클라이언트에 IP 주소를 “임대”하여 완전히 자동화된 IP 서버 할당과 완전한 동적 IP 주소 할당을 포함하도록 BOOTP의 기본 기능을 확장하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-124">DHCP is designed to extend the basic functionality of BOOTP to include completely automated IP server allocation and completely dynamic IP address allocation through "leasing" an IP address to a client for a specified period of time.</span></span> <span data-ttu-id="60f1c-125">DHCP는 BOOTP와 같은 정적 방식으로 IP 주소를 할당하도록 구성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-125">DHCP can also be configured to allocate IP addresses in a static manner like BOOTP.</span></span>

## <a name="dhcp-messages"></a><span data-ttu-id="60f1c-126">DHCP 메시지</span><span class="sxs-lookup"><span data-stu-id="60f1c-126">DHCP Messages</span></span>

<span data-ttu-id="60f1c-127">DHCP는 BOOTP의 기능을 크게 향상시키지만, DHCP는 BOOTP와 동일한 메시지 형식을 사용하며 BOOTP와 동일한 공급 업체 옵션을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-127">Although DHCP greatly enhances the functionality of BOOTP, DHCP uses the same message format as BOOTP and supports the same vendor options as BOOTP.</span></span> <span data-ttu-id="60f1c-128">DHCP는 해당 기능을 수행하기 위해 다음과 같은 7개의 새로운 DHCP 관련 옵션을 도입했습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-128">In order to perform its function, DHCP introduces seven new DHCP-specific options, as follows:</span></span>

| <span data-ttu-id="60f1c-129">옵션</span><span class="sxs-lookup"><span data-stu-id="60f1c-129">Option</span></span>     | <span data-ttu-id="60f1c-130">값</span><span class="sxs-lookup"><span data-stu-id="60f1c-130">Value</span></span> | <span data-ttu-id="60f1c-131">원본</span><span class="sxs-lookup"><span data-stu-id="60f1c-131">Origin</span></span>                |
| ---------- | ----- | --------------------- |
| <span data-ttu-id="60f1c-132">DISCOVER</span><span class="sxs-lookup"><span data-stu-id="60f1c-132">DISCOVER</span></span>   | <span data-ttu-id="60f1c-133">(1)</span><span class="sxs-lookup"><span data-stu-id="60f1c-133">(1)</span></span>   | <span data-ttu-id="60f1c-134">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-134">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="60f1c-135">OFFER</span><span class="sxs-lookup"><span data-stu-id="60f1c-135">OFFER</span></span>      | <span data-ttu-id="60f1c-136">(2)</span><span class="sxs-lookup"><span data-stu-id="60f1c-136">(2)</span></span>   | <span data-ttu-id="60f1c-137">(DHCP 서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-137">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="60f1c-138">REQUEST</span><span class="sxs-lookup"><span data-stu-id="60f1c-138">REQUEST</span></span>    | <span data-ttu-id="60f1c-139">(3)</span><span class="sxs-lookup"><span data-stu-id="60f1c-139">(3)</span></span>   | <span data-ttu-id="60f1c-140">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-140">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="60f1c-141">DECLINE</span><span class="sxs-lookup"><span data-stu-id="60f1c-141">DECLINE</span></span>    | <span data-ttu-id="60f1c-142">(4)</span><span class="sxs-lookup"><span data-stu-id="60f1c-142">(4)</span></span>   | <span data-ttu-id="60f1c-143">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-143">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="60f1c-144">ACK</span><span class="sxs-lookup"><span data-stu-id="60f1c-144">ACK</span></span>        | <span data-ttu-id="60f1c-145">(5)</span><span class="sxs-lookup"><span data-stu-id="60f1c-145">(5)</span></span>   | <span data-ttu-id="60f1c-146">(DHCP 서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-146">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="60f1c-147">NACK</span><span class="sxs-lookup"><span data-stu-id="60f1c-147">NACK</span></span>       | <span data-ttu-id="60f1c-148">(6)</span><span class="sxs-lookup"><span data-stu-id="60f1c-148">(6)</span></span>   | <span data-ttu-id="60f1c-149">(DHCP 서버에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-149">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="60f1c-150">RELEASE</span><span class="sxs-lookup"><span data-stu-id="60f1c-150">RELEASE</span></span>    | <span data-ttu-id="60f1c-151">(7)</span><span class="sxs-lookup"><span data-stu-id="60f1c-151">(7)</span></span>   | <span data-ttu-id="60f1c-152">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-152">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="60f1c-153">INFORM</span><span class="sxs-lookup"><span data-stu-id="60f1c-153">INFORM</span></span>     | <span data-ttu-id="60f1c-154">(8)</span><span class="sxs-lookup"><span data-stu-id="60f1c-154">(8)</span></span>   | <span data-ttu-id="60f1c-155">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-155">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="60f1c-156">FORCERENEW</span><span class="sxs-lookup"><span data-stu-id="60f1c-156">FORCERENEW</span></span> | <span data-ttu-id="60f1c-157">(9)</span><span class="sxs-lookup"><span data-stu-id="60f1c-157">(9)</span></span>   | <span data-ttu-id="60f1c-158">(DHCP 클라이언트에서 보냄)</span><span class="sxs-lookup"><span data-stu-id="60f1c-158">(sent by DHCP Client)</span></span> |

## <a name="dhcp-communication"></a><span data-ttu-id="60f1c-159">DHCP 통신</span><span class="sxs-lookup"><span data-stu-id="60f1c-159">DHCP Communication</span></span>

<span data-ttu-id="60f1c-160">DHCP 서버는 UDP 프로토콜을 활용하여 DHCP 클라이언트 요청을 수신하고 응답을 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-160">The DHCP Server utilizes the UDP protocol to receive DHCP Client requests and transmit responses.</span></span> <span data-ttu-id="60f1c-161">IP 주소를 갖기 전에 DHCP 정보를 전달하는 UDP 메시지는 255.255.255.255의 IP 브로드캐스트 주소를 활용하여 송수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-161">Prior to having an IP address, UDP messages carrying the DHCP information are sent and received by utilizing the IP broadcast address of 255.255.255.255.</span></span> <span data-ttu-id="60f1c-162">그러나 클라이언트가 DHCP 서버의 주소를 알고 있으면 유니캐스트 메시지를 사용하여 DHCP 메시지를 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-162">However, if the Client knows the address of the DHCP Server it may send DHCP messages using unicast messages.</span></span>

## <a name="dhcp-server-state-machine"></a><span data-ttu-id="60f1c-163">DHCP 서버 상태 시스템</span><span class="sxs-lookup"><span data-stu-id="60f1c-163">DHCP Server State Machine</span></span>

<span data-ttu-id="60f1c-164">DHCP 서버는 *nx_dhcp_server_create* 를 처리하는 동안 생성된 내부 DHCP 스레드에 의해 처리되는 2단계 상태 시스템으로 구현됩니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-164">The DHCP Server is implemented as a two-step state machine processed by an internal DHCP thread that is created during *nx_dhcp_server_create* processing.</span></span> <span data-ttu-id="60f1c-165">DHCP 서버의 주 상태는 1) DHCP 클라이언트로부터 DISCOVER 메시지를 수신하고 2) REQUEST 메시지를 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-165">The main states of DHCP Server are 1) receiving a DISCOVER message from a DHCP client and 2) receiving a REQUEST message.</span></span>

<span data-ttu-id="60f1c-166">해당 DHCP 클라이언트 상태는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-166">Below are the corresponding DHCP Client states:</span></span>

- <span data-ttu-id="60f1c-167">**NX_DHCP_STATE_BOOT**: 이전 IP 주소로 시작</span><span class="sxs-lookup"><span data-stu-id="60f1c-167">**NX_DHCP_STATE_BOOT**: Starting with a previous IP address</span></span>
- <span data-ttu-id="60f1c-168">**NX_DHCP_STATE_INIT**: 이전 IP 주소 값 없이 시작</span><span class="sxs-lookup"><span data-stu-id="60f1c-168">**NX_DHCP_STATE_INIT**: Starting with no previous IP address value</span></span>
- <span data-ttu-id="60f1c-169">**NX_DHCP_STATE_SELECTING**: DHCP 서버의 응답을 기다리는 중</span><span class="sxs-lookup"><span data-stu-id="60f1c-169">**NX_DHCP_STATE_SELECTING**: Waiting for a response from any DHCP server</span></span>
- <span data-ttu-id="60f1c-170">**NX_DHCP_STATE_REQUESTING**: DHCP 서버가 식별됨, IP 주소 요청 전송됨</span><span class="sxs-lookup"><span data-stu-id="60f1c-170">**NX_DHCP_STATE_REQUESTING**: DHCP Server identified, IP address request sent</span></span>
- <span data-ttu-id="60f1c-171">**NX_DHCP_STATE_BOUND**: DHCP IP 주소 임대가 설정됨</span><span class="sxs-lookup"><span data-stu-id="60f1c-171">**NX_DHCP_STATE_BOUND**: DHCP IP Address lease established</span></span>
- <span data-ttu-id="60f1c-172">**NX_DHCP_STATE_RENEWING**: DHCP IP 주소 임대 갱신 시간이 경과됨, 갱신이 요청됨</span><span class="sxs-lookup"><span data-stu-id="60f1c-172">**NX_DHCP_STATE_RENEWING**: DHCP IP Address lease renewal time elapsed, renewal requested</span></span>
- <span data-ttu-id="60f1c-173">**NX_DHCP_STATE_REBINDING**: DHCP IP 주소 임대 리바인딩 시간이 경과됨, 갱신이 요청됨</span><span class="sxs-lookup"><span data-stu-id="60f1c-173">**NX_DHCP_STATE_REBINDING**: DHCP IP Address lease rebind time elapsed, renewal requested</span></span>
- <span data-ttu-id="60f1c-174">**NX_DHCP_STATE_FORCERENEW**: DHCP IP 주소 임대가 설정됨, 서버 또는 애플리케이션에 의한 강제 갱신</span><span class="sxs-lookup"><span data-stu-id="60f1c-174">**NX_DHCP_STATE_FORCERENEW**: DHCP IP Address lease established, force renewal by server or by application</span></span>
- <span data-ttu-id="60f1c-175">**NX_DHCP_STATE_FAILED**: 서버를 찾을 수 없거나 서버에서 응답을 받지 않음</span><span class="sxs-lookup"><span data-stu-id="60f1c-175">**NX_DHCP_STATE_FAILED**: No server found or no response from server received</span></span>

## <a name="dhcp-additional-parameters"></a><span data-ttu-id="60f1c-176">DHCP 추가 매개 변수</span><span class="sxs-lookup"><span data-stu-id="60f1c-176">DHCP Additional Parameters</span></span>

<span data-ttu-id="60f1c-177">NetX DHCP 서버에는 DHCP 클라이언트에 대한 라우터 또는 게이트웨이 주소와 DNS 서버와 같은 일반적인/중요한 네트워크 구성 매개 변수로 DHCP 클라이언트를 제공하기 위해 *nxd_dhcp_server.h* 의 구성 가능한 옵션 NX_DHCP_DEFAULT_SERVER_OPTION_LIST에 설정된 옵션 매개 변수의 기본 목록이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-177">The NetX DHCP Server has a default list of option parameters which is set in the configurable option NX_DHCP_DEFAULT_SERVER_OPTION_LISTin *nx_dhcp_server.h* to supply DHCP Clients with common/critical network configuration parameters e.g. router or gateway address and DNS server for the DHCP Client.</span></span>

## <a name="dhcp-rfcs"></a><span data-ttu-id="60f1c-178">DHCP RFC</span><span class="sxs-lookup"><span data-stu-id="60f1c-178">DHCP RFCs</span></span>

<span data-ttu-id="60f1c-179">NetX DHCP 서버는 RFC2132, RFC2131 및 관련 RFC와 호환됩니다.</span><span class="sxs-lookup"><span data-stu-id="60f1c-179">NetX DHCP Server is compliant with RFC2132, RFC2131, and related RFCs.</span></span>
